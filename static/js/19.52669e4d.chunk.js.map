{"version":3,"sources":["common/Lazy-image/index.js","common/Operation.js","components/Home/Thumbnail.js","common/PlaylistCell.js","components/Home/BigImg.js","components/Home/ClearPhoto.js"],"names":["document","lazyLoadInstance","LazyLoad","elements_selector","callback_error","el","parentNode","style","background","error","backgroundSize","LazyImage","update","this","props","src","w","className","data-src","width","alt","React","Component","Operation","withTranslation","state","items","t","id","selectNum","dataNum","oncheck","invert","moveTop","moveLast","remove","toPlace","onClick","toPlaceClick","map","item","i","Item","key","type","name","format","overlay","trigger","Thumbnail","inject","observer","isSelected","index","onBigImg","RecycleBin","selectItems","selectList","has","true","getFile","file_s","ref","imgRef","e","visibility","ext","test","PureComponent","PlaylistCell","goPlaylistdetails","album","seleceds","created","profile","backgroundImage","imgload2","profile_1","profile_2","profile_3","placement","overlayClassName","title","dayjs","updated","frame_default","marginRight","filecount","frame_count","videoReg","BigimgCpt","zoom","imgfile","deltaY","scale","times","createRef","load","X","Y","moving","lastX","lastY","window","onmouseup","onMouseUp","onmousemove","onMouseMove","imgLoad","_","img","h","height","setState","file_b","innerWidth","innerHeight","Props","stopPropagation","preventDefault","filg","onMove","dx","clientX","dy","clientY","ViEl","closeDialog","onPiece","nextPage","VideoPlayer","poster","onWheel","up","onMouseDown","transform","fontSize","color","spin","observable","ClearPhoto","util","data","num","length","getWH","rowCount","columnCount","leng","push","list","inint","realNum","wi","hi","Width","current","offsetWidth","Math","floor","childW","childH","history","adaption","playlistInner","PchildW","PchildH","listColumnNum","util2","listRowNum","toPlaceData","toPlaceInint","listNum","toListRender","columnIndex","rowIndex","imgidx","bImg_visible","message","warning","thumbnail","visible","wsget","then","handleCancel","confirmLoading","ToPlaceDelete","confirm","content","onOk","filter","arr","Array","from","res","forEach","pos","findIndex","splice","delete","onCancel","handleOk","initList","obj","Promise","all","finally","success","goblack","toItems","Set","reset","checkAll","ToPlaceCheckAll","ToPlaceInvert","Goblack","go","size","itemData","columnWidth","rowHeight","Nodata","Loading","getContainer"],"mappings":"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","file":"static/js/19.52669e4d.chunk.js","sourcesContent":["import React from \"react\";\nimport LazyLoad from \"vanilla-lazyload\";\nimport error from '../../images/imgerror.png';\n\n// Only initialize it one time for the entire application\nif (!document.lazyLoadInstance) {\n  document.lazyLoadInstance = new LazyLoad({\n    elements_selector: \".lazy\",\n    callback_error: (el) => {\n      el.parentNode.style.background = `#fff url('${error}') center no-repeat`;\n      el.parentNode.style.backgroundSize = `80%`;\n    }\n  });\n}\n\nexport class LazyImage extends React.Component {\n\n  // Update lazyLoad after first rendering of every image\n  componentDidMount() {\n    document.lazyLoadInstance.update();\n  }\n\n  // Update lazyLoad after rerendering of every image\n  componentDidUpdate() {\n    // document.lazyLoadInstance.update();\n  }\n\n  // Just render the image with data-src\n  render() {\n    const { src, w } = this.props;\n    return (\n      <img\n        className=\"lazy\"\n        data-src={src}\n        width={w}\n        alt=''\n      />\n    );\n  }\n}\n\nexport default LazyImage;","import React, { Component } from \"react\";\nimport { Icon, Dropdown, Menu, Button } from \"antd\";\nimport \"./index.scss\";\nimport { withTranslation } from \"react-i18next\";\n\n@withTranslation()\nclass Operation extends Component {\n  state = {};\n\n\n\n  render() {\n    let items;\n    const {\n      t,\n      id,\n      selectNum,\n      dataNum,\n      oncheck,\n      invert,\n      moveTop,\n      moveLast,\n      remove,\n      toPlace,\n    } = this.props;\n    if (toPlace) {\n      items = (\n        <Menu onClick={this.props.toPlaceClick}>\n          {this.props.toPlace.map((item, i) => {\n            return (\n              <Menu.Item key={i}>\n                <Icon type=\"plus\" />\n                {item.name}\n              </Menu.Item>\n            )\n          })}\n        </Menu>\n      )\n    }\n\n    return (\n      <div className=\"operation\">\n        <div className=\"checkAll\">\n          <i\n            className={`iconfont treeNodeUnselectable ${\n              dataNum === selectNum && dataNum > 0\n                ? \"icon-xuanzhong1\"\n                : \"icon-weixuanzhong\"\n              }`}\n            onClick={oncheck}\n          ></i>\n          <span className=\"checkAll-text\">\n            {selectNum > 0\n              ? t(\"Selected2\").format(selectNum)\n              : t(\"Allelection\")}\n          </span>\n          {selectNum > 0 && (\n            <span onClick={invert} className=\"invert-Selection\">\n              {t(\"Reverseselection\")}\n            </span>\n          )}\n        </div>\n        {selectNum > 0 && moveTop && (\n          <div className=\"btn\">\n            <span\n              onClick={() => {\n                moveTop && moveTop(id);\n              }}\n            >\n              {t(\"Movefront\")}\n            </span>\n          </div>\n        )}\n        {selectNum > 0 && moveLast && (\n          <div className=\"btn\">\n            <span\n              onClick={() => {\n                moveLast && moveLast(id);\n              }}\n            >\n              {t(\"Movelast\")}\n            </span>\n          </div>\n        )}\n        {toPlace && selectNum > 0 && (\n          <Dropdown overlay={items} trigger={['click']}>\n            <Button className='btn'>\n              {t('addto')} <Icon type=\"down\" />\n            </Button>\n          </Dropdown>\n        )}\n        {remove && selectNum > 0 && (\n          <Button\n            className='btn'\n            onClick={() => {\n              remove(id);\n            }}\n          >\n            <Icon type=\"delete\" />\n            {t(\"delete\")}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Operation;\n","import React, { PureComponent } from 'react';\nimport '../../common/Thumbnail/style.scss';\nimport { getFile } from '../../util/util';\nimport { inject, observer } from 'mobx-react';\n\n@inject('RecycleBin') @observer\nclass Thumbnail extends PureComponent {\n  state = {}\n  render() {\n    let isSelected;\n    const { style, index, onBigImg, item, RecycleBin: { selectItems, selectList } } = this.props;\n    if (item) {\n      isSelected = selectItems.has(item.id);\n    }\n\n    try {\n      if (item.true) {\n        return <div style={style}></div>\n      } else {\n        return (\n          <div\n            className={`thumbnail ${isSelected ? 'selected' : ''}`}\n            style={{ ...style, background: `#d3d3d3 url(${getFile.file_s(item.id)}) center center no-repeat` }}\n            ref={this.imgRef}\n            onClick={() => { onBigImg(index) }}>\n            <span\n              className='icon-check-s treeNodeUnselectable'\n              onClick={e => { selectList(e, item.id) }}>\n              <i className='iconfont' style={isSelected ? {} : { visibility: \"hidden\" }}>&#xe62d;</i>\n            </span>\n            {item.ext === 'gif' && <i className='iconfont GIF-IMG'>&#xe670;</i>}\n            {/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(item.ext) && <i className='iconfont v_icon'>&#xe6ae;</i>}\n          </div>\n        );\n      }\n    } catch (error) {\n      return <div style={style}></div>\n    }\n  }\n}\n\nexport default Thumbnail;","import React, { PureComponent } from 'react';\nimport { Tooltip } from 'antd';\nimport { withTranslation } from 'react-i18next';\nimport LazyImage from './Lazy-image';\nimport imgload2 from '../images/imgerror.png';\nimport { getFile } from '../util/util';\nimport dayjs from 'dayjs';\nimport { inject, observer } from 'mobx-react';\n\n@withTranslation() @inject('RecycleBin') @observer\nclass PlaylistCell extends PureComponent {\n  render() {\n    let isSelected;\n    const { t, item, style, goPlaylistdetails, album, RecycleBin: { seleceds } } = this.props;\n    if (item) {\n      isSelected = seleceds.has(item.id);\n    }\n    try {\n      if (item.true) {\n        return <div style={style}></div>\n      } else {\n        return (\n          <div className='PlaylistCell' style={style}>\n            <div\n              className={`list_cell ${isSelected ? 'list_cell_check' : ''}`}\n              onClick={() => { goPlaylistdetails && goPlaylistdetails(item.id, item.name, item.created) }}>\n              <span\n                // style={OS === 'tab' ? { visibility: 'inherit' } : {}}\n                className={`icon-check-s treeNodeUnselectable`}\n                onClick={(e) => { }}>\n                <i className='iconfont' style={isSelected ? {} : { visibility: \"hidden\" }}>&#xe62d;</i>\n              </span>\n              <div className='top_img'>\n                {album ? (\n                  <div\n                    className='album_top_img'\n                    style={item.profile ? {} : { backgroundImage: `url(${imgload2})`, backgroundSize: '100% 100%' }}>\n                    {item.profile && <LazyImage\n                      src={getFile.file_s(item.profile.id)}\n                      alt={item.profile.id}\n                    />}\n                  </div>\n                ) : (\n                    <>\n                      <div className=\"top_topImg\"\n                        style={item.profile ? {} : { backgroundImage: `url(${imgload2})`, backgroundSize: '100% 140%' }}\n                      >\n                        {item.profile && <LazyImage\n                          src={getFile.file_s(item.profile.id)}\n                          alt={item.profile.id}\n                        />}\n                      </div>\n                      <div className=\"top_bottomImgs\">\n                        <span\n                          className=\"img1\"\n                          style={item.profile_1 ? {} : { backgroundImage: `url(${imgload2})`, backgroundSize: '100% 100%' }}\n                        >\n                          {item.profile_1 && <LazyImage\n                            src={getFile.file_s(item.profile_1.id)}\n                            alt={item.profile_1.id}\n                          />}\n                        </span>\n                        <span\n                          className=\"img2\"\n                          style={item.profile_2 ? {} : { backgroundImage: `url(${imgload2})`, backgroundSize: '100% 100%' }}\n                        >\n                          {item.profile_2 && <LazyImage\n                            src={getFile.file_s(item.profile_2.id)}\n                            alt={item.profile_2.id}\n                          />}\n                        </span>\n                        <span\n                          className=\"img3\"\n                          style={item.profile_3 ? {} : { backgroundImage: `url(${imgload2})`, backgroundSize: '100% 100%' }}\n                        >\n                          {item.profile_3 && <LazyImage\n                            src={getFile.file_s(item.profile_3.id)}\n                            alt={item.profile_3.id}\n                          />}\n                        </span>\n                      </div>\n                    </>\n                  )}\n              </div>\n              <div className='information'>\n                <div className='information_top'>\n                  <Tooltip placement=\"bottom\" overlayClassName='tooltip' title={item.name}>\n                    <p className='name ellipsis'>{item.name}</p>\n                  </Tooltip>\n                  <p className='time'>\n                    <span>{t('LastUpdate')}{dayjs(item.updated || item.created).format(t('L'))}</span>\n                  </p>\n                  {item.frame_default > 0 && <span className='frames_def'>{t('default')}</span>}\n                </div>\n                <div className='information_bottom'>\n                  <span style={{ marginRight: '10px' }}>{item.filecount ? item.filecount : 0}{' '}{t('Photo')}</span>\n                  {!album && <span>{item.frame_count}{' '}{t('photoframe')}</span>}\n                </div>\n              </div>\n            </div >\n          </div >\n        );\n      }\n    } catch (error) {\n      return <div style={style}></div>\n    }\n  }\n}\n\nexport default PlaylistCell;","import React from 'react';\nimport '../../common/BigimgCpt.js/style.scss';\nimport { observable } from 'mobx';\nimport { getFile, imgLoad } from '../../util/util';\nimport { Icon } from 'antd';\nimport VideoPlayer from '../../common/VideoPlayer';\nimport { observer } from 'mobx-react';\n\nconst videoReg = /(mp4|avi|rmvb|rm|wmv|mov|mpg|mpeg|flv|mkv|3gp|webm|ts|m3u8)$/\n\n\n@observer\nclass BigimgCpt extends React.Component {\n  constructor(props) {\n    super(props);\n    this.imgRef = React.createRef();\n    this.state = {\n      load: false,\n      X: 0,\n      Y: 0\n    }\n    this.moving = false;\n    this.lastX = null;\n    this.lastY = null;\n    this.times = 1;\n    window.onmouseup = e => { this.onMouseUp(e) };\n    window.onmousemove = e => { this.onMouseMove(e) };\n  }\n  @observable scale = 1;\n  // @observable x = -50;\n  // @observable y = -50;\n  @observable filg = false;\n  // isDown = false;\n  // l = 50;\n  // r = 50;\n  // \n\n  componentDidMount() {\n    const { imgfile } = this.props;\n    imgLoad(getFile.file_s(imgfile.id), (_, img) => {\n      const w = img.width / 2;\n      const h = img.height / 2;\n      this.setState({ X: -w, Y: -h })\n    })\n    imgLoad(getFile.file_b(imgfile.id), (_, img) => {\n      if (img.width > window.innerWidth) {\n        img.width = window.innerWidth\n      }\n      if (img.height > window.innerHeight) {\n        img.height = window.innerHeight\n      }\n      const w = img.width / 2;\n      const h = img.height / 2;\n      this.setState({ load: true, X: -w, Y: -h })\n    })\n  }\n\n\n  UNSAFE_componentWillReceiveProps(Props) {\n    if (this.props.imgfile.id !== Props.imgfile.id) {\n      this.scale = 1;\n      this.times = 1;\n      this.setState({ load: false })\n      imgLoad(getFile.file_s(Props.imgfile.id), (_, img) => {\n        const w = img.width / 2;\n        const h = img.height / 2;\n        this.setState({ X: -w, Y: -h })\n      })\n      imgLoad(getFile.file_b(Props.imgfile.id), (_, img) => {\n        if (img.width > window.innerWidth) {\n          img.width = window.innerWidth\n        }\n        if (img.height > window.innerHeight) {\n          img.height = window.innerHeight\n        }\n        const w = img.width / 2;\n        const h = img.height / 2;\n        this.setState({ load: true, X: -w, Y: -h })\n      })\n    }\n  }\n\n  onMouseDown(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.filg = true;\n    this.moving = true;\n  }\n\n  onMouseUp() {\n    this.filg = false;\n    this.moving = false;\n    this.lastX = null;\n    this.lastY = null;\n  }\n\n  onMouseMove(e) {\n    this.moving && this.onMove(e);\n  }\n\n  onMove(e) {\n    if (this.lastX && this.lastY) {\n      let dx = e.clientX - this.lastX;\n      let dy = e.clientY - this.lastY;\n      this.setState({\n        X: this.state.X + dx * this.times,\n        Y: this.state.Y + dy * this.times,\n      })\n    }\n    this.lastX = e.clientX;\n    this.lastY = e.clientY;\n  }\n\n  zoom = (e) => {\n    if (!videoReg.test(this.props.imgfile.ext)) {\n      if (e.deltaY > 0) {\n        if (this.scale >= 0.25) {\n          this.scale -= 0.05;\n        }\n\n      } else {\n        if (this.scale <= 4) {\n          this.scale += 0.05;\n        }\n      }\n      if (this.scale < 1) {\n        this.times = 1 - this.scale + 1;\n      } else {\n        this.times = 1;\n      }\n    }\n  }\n\n  render() {\n    const { closeDialog, imgfile, onPiece, nextPage } = this.props;\n    let ViEl;\n    if (videoReg.test(imgfile.ext)) {\n      ViEl = (\n        <VideoPlayer\n          poster={getFile.file_s(imgfile.id)}\n          src={getFile.file_b(imgfile.id)} />\n      )\n    } else {\n      ViEl = <img src={this.state.load ? getFile.file_b(imgfile.id) : getFile.file_s(imgfile.id)} alt={imgfile.id} />\n    }\n    return (\n      <div className='dialog treeNodeUnselectable'>\n        <span className='close-dialog' onClick={closeDialog}><Icon type=\"close\" /></span>\n        <div id='imgbody' className='dialog-boby' onWheel={this.zoom} onMouseUp={this.up}>\n          <div id='imgbox'\n            className='img-wrap-clear'\n            ref={this.imgRef}\n            onMouseDown={e => { this.onMouseDown(e) }}\n            style={{\n              transform: videoReg.test(imgfile.ext) ? `scale(${this.scale}) translateX(-50%)translateY(-50%)` : `scale(${this.scale}) translateX(${this.state.X}px)translateY(${this.state.Y}px)`,\n            }}\n          >\n            {!videoReg.test(imgfile.ext) && !this.state.load && <Icon\n              className='icon-load'\n              type=\"loading\"\n              style={{\n                fontSize: 70,\n                color: '#fff'\n              }} spin />}\n            {ViEl}\n          </div>\n          <div className={`onPiece ${this.filg ? 'hide' : ''}`} onClick={onPiece}>\n            <span className='pre-arrow'>\n              <Icon type=\"left\" />\n            </span>\n          </div>\n          <div className={`nextPage ${this.filg ? 'hide2' : ''}`} onClick={nextPage}>\n            <span className='next-arrow'>\n              <Icon type=\"right\" />\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default BigimgCpt;\n","import React, { Component } from \"react\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeGrid as Grid } from 'react-window';\nimport Goblack from \"../../common/Goblack\";\nimport \"./style.scss\";\nimport Operation from \"../../common/Operation\";\nimport { wsget } from \"../../ws\";\nimport Loading from \"../../common/Widget/Loading\";\nimport Nodata from \"../../common/Widget/Nodata\";\nimport Thumbnail from \"./Thumbnail\";\nimport { inject, observer } from 'mobx-react';\nimport { withTranslation } from 'react-i18next';\nimport { Modal, message } from \"antd\";\nimport PlaylistCell from \"../../common/PlaylistCell\";\nimport BigimgCpt from \"./BigImg\";\nimport { imgLoad, getFile } from \"../../util/util\";\n\n@withTranslation()\n@inject('RecycleBin') @observer\nclass ClearPhoto extends Component {\n  constructor(props) {\n    super(props);\n    this.imgRef = React.createRef();\n    this.playlistInner = React.createRef();\n    this.state = {\n      inint: false,\n      list: [],\n      realNum: 0,\n      rowCount: 0,\n      toItems: [\n        { name: 'Playlist' },\n        { name: 'Alubm' },\n      ],\n      visible: false,\n      toPlaceInint: false,\n      toPlaceData: [],\n      seleceds: new Set(),\n      bImg_visible: false,\n      imgfile: {},\n      listNum: 0\n    };\n  }\n\n  componentDidMount() {\n    wsget(\"file_unused\", null).then((data) => {\n      this.util(data);\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.RecycleBin.reset();\n  }\n\n  util = data => {\n    const num = data.length;\n    this.getWH()\n    this.rowCount = data.length / this.columnCount;\n    if (data.length % this.columnCount !== 0) {\n      const leng = this.columnCount - data.length % this.columnCount;\n      for (let index = 0; index < leng; index++) {\n        data.push({ true: true });\n      }\n    }\n    this.setState({\n      list: data,\n      inint: true,\n      realNum: num\n    });\n  }\n\n  //图片计算宽高\n  getWH = () => {\n    try {\n      let wi, hi, w = 165, h = 165;\n      let Width = this.imgRef.current.offsetWidth - 18;\n      let row = Math.floor(Width / w);\n      let space = Width % w;\n      wi = space / row + w;\n      hi = wi / w * h;\n      this.childW = wi;\n      this.childH = hi;\n      this.columnCount = Math.floor(Width / w);\n    } catch (error) {\n      console.log(error);\n      this.props.history.push(\"/\");\n    }\n  }\n\n  adaption = () => {\n    let wi, hi, w = 215, h = 240;\n    let Width = this.playlistInner.current.offsetWidth - 18;\n    let row = Math.floor(Width / w);\n    let space = Width % w;\n    wi = space / row + w;\n    hi = wi / w * h;\n    this.PchildW = wi;\n    this.PchildH = hi;\n    this.listColumnNum = Math.floor(Width / w);\n  }\n\n  util2 = (data, album) => {\n    const num = data.length;\n    console.log(num);\n    this.adaption();\n    this.listRowNum = data.length / this.listColumnNum;\n    if (data.length % this.listColumnNum !== 0) {\n      const leng = this.listColumnNum - data.length % this.listColumnNum;\n      for (let index = 0; index < leng; index++) {\n        data.push({ true: true });\n      }\n    }\n    this.setState({\n      toPlaceData: data,\n      toPlaceInint: true,\n      listNum: num,\n      album\n    });\n  }\n\n  toListRender = ({ columnIndex, data, rowIndex, style }) => {\n    const { seleceds, album } = this.state;\n    const index = rowIndex * this.listColumnNum + columnIndex;\n    const item = data[index];\n    return (\n      <PlaylistCell\n        key={item.id}\n        style={style}\n        item={item}\n        goPlaylistdetails={this.props.RecycleBin.goPlaylistdetails}\n        // isSelected={seleceds.has(item.id)}\n        album={album}\n      />\n    )\n  }\n\n  onBigImg = (i) => {\n    const { realNum, list } = this.state;\n    const img = list[i];\n    this.imgidx = i;\n    this.setState({ bImg_visible: true, imgfile: img })\n    if (!/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(list[i].ext)) {\n      if (i + 1 < realNum) {\n        if (!/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(list[i + 1].ext)) {\n          imgLoad(getFile.file_b(list[i + 1].id))\n        }\n      }\n      if (!(i - 1 < 0)) {\n        if (!/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(list[i - 1].ext)) {\n          imgLoad(getFile.file_b(list[i - 1].id))\n        }\n      }\n    } else {\n      if (i + 1 < realNum) {\n        if (!/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(list[i + 1].ext)) {\n          imgLoad(getFile.file_b(list[i + 1].id))\n        }\n      }\n      if (i - 1 >= 0) {\n        if (!/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(list[i - 1].ext)) {\n          imgLoad(getFile.file_b(list[i - 1].id))\n        }\n      }\n    }\n  }\n\n  onPiece = () => {\n    if (this.imgidx - 1 >= 0) {\n      this.onBigImg(this.imgidx - 1)\n    } else {\n      this.imgidx = this.state.realNum - 1;\n      this.onBigImg(this.imgidx)\n      message.warning(this.props.t('lastOne'));\n    }\n  }\n\n  nextPage = () => {\n    if (this.imgidx + 1 >= this.state.realNum) {\n      this.imgidx = 0;\n      this.onBigImg(this.imgidx)\n      message.warning(this.props.t('firstOne'));\n      return;\n    }\n    this.onBigImg(this.imgidx + 1)\n  }\n\n  closeDialog = () => {\n    this.setState({\n      bImg_visible: false\n    })\n  }\n\n  thumbnail = ({ columnIndex, data, rowIndex, style }) => {\n    const index = rowIndex * this.columnCount + columnIndex;\n    const item = data[index];\n    return (\n      <Thumbnail\n        index={index}\n        item={item}\n        style={style}\n        onBigImg={this.onBigImg}\n      />\n    )\n  }\n\n  toPlaceClick = ({ key }) => {\n    this.adaption();\n    this.setState({ visible: true })\n    if (key === '0') {\n      wsget('playlist_list', null).then(data => {\n        this.util2(data, false)\n        // this.setState({ toPlaceData: data, toPlaceInint: true, album: false })\n      })\n    } else if (key === '1') {\n      wsget('album_list', null).then(data => {\n        this.util2(data, true)\n        // this.setState({ toPlaceData: data, toPlaceInint: true, album: true })\n      })\n    }\n  }\n\n  handleCancel = () => {\n    this.setState({ visible: false, confirmLoading: false, toPlaceInint: false })\n    this.props.RecycleBin.ToPlaceDelete();\n  }\n\n  remove = () => {\n    Modal.confirm({\n      title: 'Are you sure to delete these files?',\n      content: 'Deletion cannot be restored',\n      onOk: () => {\n        const list = this.state.list.filter(el => el.id);\n        const arr = Array.from(this.props.RecycleBin.selectItems);\n        wsget('file_delete_unused', arr, 1).then(res => {\n          arr.forEach(item => {\n            const pos = list.findIndex(el => el.id === item);\n            list.splice(pos, 1);\n          })\n          this.util(list)\n          this.props.RecycleBin.delete();\n        })\n      },\n      onCancel() {\n        console.log('Cancel');\n      },\n    });\n\n  }\n\n  handleOk = () => {\n    let arr = [];\n    let list = [];\n    const initList = this.state.list;\n    const { album } = this.state;\n    const { selectItems, seleceds } = this.props.RecycleBin;\n    this.setState({\n      confirmLoading: true,\n    });\n    Array.from(selectItems).forEach(id => {\n      list.push({ id })\n    })\n    Array.from(seleceds).forEach(item => {\n      if (album) {\n        const obj = {\n          id: item,\n          list\n        }\n        arr.push(wsget('album_add_files', obj));\n      } else {\n        const obj = {\n          id: item,\n          list,\n          index: 0\n        }\n        arr.push(wsget('playlist_save_to', obj));\n      }\n    })\n\n    Promise.all(arr).finally(() => {\n      message.success(this.props.t('successful'))\n      Array.from(selectItems).forEach(id => {\n        const pos = initList.findIndex(el => el.id === id);\n        initList.splice(pos, 1);\n      })\n      this.setState({\n        visible: false,\n        confirmLoading: false,\n        // seleceds: new Set(),\n        list: initList\n      });\n      this.props.RecycleBin.delete();\n      this.props.RecycleBin.ToPlaceDelete();\n    })\n  }\n\n  goblack = () => {\n    this.props.history.push(`/`);\n  };\n\n  render() {\n    const {\n      inint,\n      list,\n      realNum,\n      toItems,\n      visible,\n      confirmLoading,\n      toPlaceInint,\n      toPlaceData,\n      album,\n      bImg_visible,\n      imgfile,\n      listNum } = this.state;\n    const { selectItems, checkAll, invert, ToPlaceCheckAll, seleceds, ToPlaceInvert } = this.props.RecycleBin;\n    return (\n      <div className=\"ClearPhoto\">\n        <div className=\"clear_header\">\n          <Goblack go={this.goblack} name={this.props.t('temporaryFiles')} />\n        </div>\n        <Operation\n          selectNum={selectItems.size}\n          dataNum={realNum}\n          oncheck={() => { checkAll(list) }}\n          invert={() => { invert(list) }}\n          remove={this.remove}\n          toPlace={toItems}\n          toPlaceClick={this.toPlaceClick}\n        />\n        <div ref={this.imgRef} className=\"imglist_box\">\n          {inint ? (\n            list.length > 0 ? (\n              <AutoSizer>\n                {({ height, width }) => {\n                  const { list } = this.state;\n                  this.getWH()\n                  this.rowCount = list.length / this.columnCount;\n                  return (\n                    <Grid\n                      className=\"Grid\"\n                      itemData={list}\n                      rowCount={this.rowCount}\n                      columnCount={this.columnCount}\n                      columnWidth={this.childW}\n                      height={height}\n                      rowHeight={this.childH}\n                      width={width}\n                    >\n                      {this.thumbnail}\n                    </Grid>\n                  )\n                }}\n              </AutoSizer>\n            ) : (\n                <Nodata />\n              )\n          ) : (\n              <Loading />\n            )}\n        </div>\n\n        <Modal\n          title={album ? 'Albums' : 'Playlists'}\n          visible={visible}\n          onOk={this.handleOk}\n          confirmLoading={confirmLoading}\n          onCancel={this.handleCancel}\n          width={900}\n          getContainer={false}\n        >\n          <div className='ToPlace-inner'>\n            {toPlaceInint && <Operation\n              selectNum={seleceds.size}\n              dataNum={listNum}\n              oncheck={() => { ToPlaceCheckAll(toPlaceData) }}\n              invert={() => { ToPlaceInvert(toPlaceData) }}\n            />}\n            <div className='list-inner' ref={this.playlistInner}>\n              {toPlaceInint ? toPlaceData.length > 0 ? (\n                <AutoSizer>\n                  {({ height, width }) => {\n                    this.adaption()\n                    this.listRowNum = toPlaceData.length / this.listColumnNum;\n                    return (\n                      <Grid\n                        className=\"Grid\"\n                        itemData={toPlaceData}\n                        rowCount={this.listRowNum}\n                        columnCount={this.listColumnNum}\n                        columnWidth={this.PchildW}\n                        height={height}\n                        rowHeight={this.PchildH}\n                        width={width}\n                      >\n                        {this.toListRender}\n                      </Grid>\n                    )\n                  }}\n                </AutoSizer>\n              ) : <Nodata /> : <Loading />}\n            </div>\n          </div>\n        </Modal>\n\n        {\n          bImg_visible && <BigimgCpt\n            closeDialog={this.closeDialog}\n            imgfile={imgfile}\n            onPiece={this.onPiece}\n            nextPage={this.nextPage} />\n        }\n\n      </div >\n    );\n  }\n}\n\nexport default ClearPhoto;\n"],"sourceRoot":""}