(this.webpackJsonplovcube=this.webpackJsonplovcube||[]).push([[19],{735:function(e,t,a){"use strict";var n=a(8),i=a(10),l=a(21),c=a(22),o=a(23),s=a(0),r=a.n(s),m=a(738),u=a.n(m),d=a(731),f=a.n(d);document.lazyLoadInstance||(document.lazyLoadInstance=new u.a({elements_selector:".lazy",callback_error:function(e){e.parentNode.style.background="#fff url('".concat(f.a,"') center no-repeat"),e.parentNode.style.backgroundSize="80%"}}));var h=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.lazyLoadInstance.update()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.src,a=e.w;return r.a.createElement("img",{className:"lazy","data-src":t,width:a,alt:""})}}]),t}(r.a.Component);t.a=h},762:function(e,t,a){},957:function(e,t,a){},993:function(e,t,a){"use strict";a.r(t);a(156);var n,i,l,c,o,s,r,m,u=a(92),d=(a(64),a(17)),f=a(8),h=a(10),p=a(21),g=a(22),b=a(23),v=a(0),y=a.n(v),E=a(749),N=a(752),k=a(737),j=(a(762),a(789),a(822)),w=(a(523),a(135)),O=(a(790),a(821)),_=(a(72),a(13)),C=(a(957),a(36)),P=Object(C.b)()(n=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.t,n=t.id,i=t.selectNum,l=t.dataNum,c=t.oncheck,o=t.invert,s=t.moveTop,r=t.moveLast,m=t.remove,u=t.toPlace;return u&&(e=y.a.createElement(O.a,{onClick:this.props.toPlaceClick},this.props.toPlace.map((function(e,t){return y.a.createElement(O.a.Item,{key:t},y.a.createElement(_.a,{type:"plus"}),e.name)})))),y.a.createElement("div",{className:"operation"},y.a.createElement("div",{className:"checkAll"},y.a.createElement("i",{className:"iconfont treeNodeUnselectable ".concat(l===i&&l>0?"icon-xuanzhong1":"icon-weixuanzhong"),onClick:c}),y.a.createElement("span",{className:"checkAll-text"},i>0?a("Selected2").format(i):a("Allelection")),i>0&&y.a.createElement("span",{onClick:o,className:"invert-Selection"},a("Reverseselection"))),i>0&&s&&y.a.createElement("div",{className:"btn"},y.a.createElement("span",{onClick:function(){s&&s(n)}},a("Movefront"))),i>0&&r&&y.a.createElement("div",{className:"btn"},y.a.createElement("span",{onClick:function(){r&&r(n)}},a("Movelast"))),u&&i>0&&y.a.createElement(j.a,{overlay:e,trigger:["click"]},y.a.createElement(w.a,{className:"btn"},a("addto")," ",y.a.createElement(_.a,{type:"down"}))),m&&i>0&&y.a.createElement(w.a,{className:"btn",onClick:function(){m(n)}},y.a.createElement(_.a,{type:"delete"}),a("delete")))}}]),t}(v.Component))||n,I=a(7),x=a(264),R=a(263),S=a(125),B=(a(764),a(6)),M=a(39),z=Object(M.b)("RecycleBin")(i=Object(M.c)(i=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.style,n=t.index,i=t.onBigImg,l=t.item,c=t.RecycleBin,o=c.selectItems,s=c.selectList;l&&(e=o.has(l.id));try{return l.true?y.a.createElement("div",{style:a}):y.a.createElement("div",{className:"thumbnail ".concat(e?"selected":""),style:Object(S.a)({},a,{background:"#d3d3d3 url(".concat(B.h.file_s(l.id),") center center no-repeat")}),ref:this.imgRef,onClick:function(){i(n)}},y.a.createElement("span",{className:"icon-check-s treeNodeUnselectable",onClick:function(e){s(e,l.id)}},y.a.createElement("i",{className:"iconfont",style:e?{}:{visibility:"hidden"}},"\ue62d")),"gif"===l.ext&&y.a.createElement("i",{className:"iconfont GIF-IMG"},"\ue670"),/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(l.ext)&&y.a.createElement("i",{className:"iconfont v_icon"},"\ue6ae"))}catch(r){return y.a.createElement("div",{style:a})}}}]),t}(v.PureComponent))||i)||i,D=(a(187),a(117)),W=a(735),Y=a(731),X=a.n(Y),A=a(43),L=a.n(A),H=Object(C.b)()(l=Object(M.b)("RecycleBin")(l=Object(M.c)(l=function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.t,n=t.item,i=t.style,l=t.goPlaylistdetails,c=t.album,o=t.RecycleBin.seleceds;n&&(e=o.has(n.id));try{return n.true?y.a.createElement("div",{style:i}):y.a.createElement("div",{className:"PlaylistCell",style:i},y.a.createElement("div",{className:"list_cell ".concat(e?"list_cell_check":""),onClick:function(){l&&l(n.id,n.name,n.created)}},y.a.createElement("span",{className:"icon-check-s treeNodeUnselectable",onClick:function(e){}},y.a.createElement("i",{className:"iconfont",style:e?{}:{visibility:"hidden"}},"\ue62d")),y.a.createElement("div",{className:"top_img"},c?y.a.createElement("div",{className:"album_top_img",style:n.profile?{}:{backgroundImage:"url(".concat(X.a,")"),backgroundSize:"100% 100%"}},n.profile&&y.a.createElement(W.a,{src:B.h.file_s(n.profile.id),alt:n.profile.id})):y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"top_topImg",style:n.profile?{}:{backgroundImage:"url(".concat(X.a,")"),backgroundSize:"100% 140%"}},n.profile&&y.a.createElement(W.a,{src:B.h.file_s(n.profile.id),alt:n.profile.id})),y.a.createElement("div",{className:"top_bottomImgs"},y.a.createElement("span",{className:"img1",style:n.profile_1?{}:{backgroundImage:"url(".concat(X.a,")"),backgroundSize:"100% 100%"}},n.profile_1&&y.a.createElement(W.a,{src:B.h.file_s(n.profile_1.id),alt:n.profile_1.id})),y.a.createElement("span",{className:"img2",style:n.profile_2?{}:{backgroundImage:"url(".concat(X.a,")"),backgroundSize:"100% 100%"}},n.profile_2&&y.a.createElement(W.a,{src:B.h.file_s(n.profile_2.id),alt:n.profile_2.id})),y.a.createElement("span",{className:"img3",style:n.profile_3?{}:{backgroundImage:"url(".concat(X.a,")"),backgroundSize:"100% 100%"}},n.profile_3&&y.a.createElement(W.a,{src:B.h.file_s(n.profile_3.id),alt:n.profile_3.id}))))),y.a.createElement("div",{className:"information"},y.a.createElement("div",{className:"information_top"},y.a.createElement(D.a,{placement:"bottom",overlayClassName:"tooltip",title:n.name},y.a.createElement("p",{className:"name ellipsis"},n.name)),y.a.createElement("p",{className:"time"},y.a.createElement("span",null,a("LastUpdate"),L()(n.updated||n.created).format(a("L")))),n.frame_default>0&&y.a.createElement("span",{className:"frames_def"},a("default"))),y.a.createElement("div",{className:"information_bottom"},y.a.createElement("span",{style:{marginRight:"10px"}},n.filecount?n.filecount:0," ",a("Photo")),!c&&y.a.createElement("span",null,n.frame_count," ",a("photoframe"))))))}catch(s){return y.a.createElement("div",{style:i})}}}]),t}(v.PureComponent))||l)||l)||l,U=a(3),$=a(18),T=a(2),F=(a(52),a(765),a(1)),G=a(766),J=/(mp4|avi|rmvb|rm|wmv|mov|mpg|mpeg|flv|mkv|3gp|webm|ts|m3u8)$/,q=Object(M.c)((o=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(p.a)(this,Object(g.a)(t).call(this,e)),Object(U.a)(a,"scale",s,Object($.a)(a)),Object(U.a)(a,"filg",r,Object($.a)(a)),a.zoom=function(e){J.test(a.props.imgfile.ext)||(e.deltaY>0?a.scale>=.25&&(a.scale-=.05):a.scale<=4&&(a.scale+=.05),a.scale<1?a.times=1-a.scale+1:a.times=1)},a.imgRef=y.a.createRef(),a.state={load:!1,X:0,Y:0},a.moving=!1,a.lastX=null,a.lastY=null,a.times=1,window.onmouseup=function(e){a.onMouseUp(e)},window.onmousemove=function(e){a.onMouseMove(e)},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.imgfile;Object(B.j)(B.h.file_s(t.id),(function(t,a){var n=a.width/2,i=a.height/2;e.setState({X:-n,Y:-i})})),Object(B.j)(B.h.file_b(t.id),(function(t,a){a.width>window.innerWidth&&(a.width=window.innerWidth),a.height>window.innerHeight&&(a.height=window.innerHeight);var n=a.width/2,i=a.height/2;e.setState({load:!0,X:-n,Y:-i})}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.imgfile.id!==e.imgfile.id&&(this.scale=1,this.times=1,this.setState({load:!1}),Object(B.j)(B.h.file_s(e.imgfile.id),(function(e,a){var n=a.width/2,i=a.height/2;t.setState({X:-n,Y:-i})})),Object(B.j)(B.h.file_b(e.imgfile.id),(function(e,a){a.width>window.innerWidth&&(a.width=window.innerWidth),a.height>window.innerHeight&&(a.height=window.innerHeight);var n=a.width/2,i=a.height/2;t.setState({load:!0,X:-n,Y:-i})})))}},{key:"onMouseDown",value:function(e){J.test(this.props.imgfile.ext)||(e.stopPropagation(),e.preventDefault(),this.filg=!0,this.moving=!0)}},{key:"onMouseUp",value:function(){this.filg=!1,this.moving=!1,this.lastX=null,this.lastY=null}},{key:"onMouseMove",value:function(e){this.moving&&this.onMove(e)}},{key:"onMove",value:function(e){if(this.lastX&&this.lastY){var t=e.clientX-this.lastX,a=e.clientY-this.lastY;this.setState({X:this.state.X+t*this.times,Y:this.state.Y+a*this.times})}this.lastX=e.clientX,this.lastY=e.clientY}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.closeDialog,i=a.imgfile,l=a.onPiece,c=a.nextPage;return e=J.test(i.ext)?y.a.createElement(G.a,{poster:B.h.file_s(i.id),src:B.h.file_b(i.id)}):y.a.createElement("img",{src:this.state.load?B.h.file_b(i.id):B.h.file_s(i.id),alt:i.id}),y.a.createElement("div",{className:"dialog treeNodeUnselectable"},y.a.createElement("span",{className:"close-dialog",onClick:n},y.a.createElement(_.a,{type:"close"})),y.a.createElement("div",{id:"imgbody",className:"dialog-boby",onWheel:this.zoom,onMouseUp:this.up},y.a.createElement("div",{id:"imgbox",className:"img-wrap-clear",ref:this.imgRef,onMouseDown:function(e){t.onMouseDown(e)},style:{transform:J.test(i.ext)?"scale(".concat(this.scale,") translateX(-50%)translateY(-50%)"):"scale(".concat(this.scale,") translateX(").concat(this.state.X,"px)translateY(").concat(this.state.Y,"px)")}},!J.test(i.ext)&&!this.state.load&&y.a.createElement(_.a,{className:"icon-load",type:"loading",style:{fontSize:70,color:"#fff"},spin:!0}),e),y.a.createElement("div",{className:"onPiece ".concat(this.filg?"hide":""),onClick:l},y.a.createElement("span",{className:"pre-arrow"},y.a.createElement(_.a,{type:"left"}))),y.a.createElement("div",{className:"nextPage ".concat(this.filg?"hide2":""),onClick:c},y.a.createElement("span",{className:"next-arrow"},y.a.createElement(_.a,{type:"right"})))))}}]),t}(y.a.Component),s=Object(T.a)(o.prototype,"scale",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),r=Object(T.a)(o.prototype,"filg",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=o))||c,K=Object(C.b)()(m=Object(M.b)("RecycleBin")(m=Object(M.c)(m=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).util=function(e){var t=e.length;if(a.getWH(),a.rowCount=e.length/a.columnCount,e.length%a.columnCount!==0)for(var n=a.columnCount-e.length%a.columnCount,i=0;i<n;i++)e.push({true:!0});a.setState({list:e,inint:!0,realNum:t})},a.getWH=function(){try{var e,t,n=165,i=a.imgRef.current.offsetWidth-18;t=(e=i%n/Math.floor(i/n)+n)/n*165,a.childW=e,a.childH=t,a.columnCount=Math.floor(i/n)}catch(l){a.props.history.push("/")}},a.adaption=function(){var e,t,n=215,i=a.playlistInner.current.offsetWidth-18;t=(e=i%n/Math.floor(i/n)+n)/n*240,a.PchildW=e,a.PchildH=t,a.listColumnNum=Math.floor(i/n)},a.util2=function(e,t){var n=e.length;if(a.adaption(),a.listRowNum=e.length/a.listColumnNum,e.length%a.listColumnNum!==0)for(var i=a.listColumnNum-e.length%a.listColumnNum,l=0;l<i;l++)e.push({true:!0});a.setState({toPlaceData:e,toPlaceInint:!0,listNum:n,album:t})},a.toListRender=function(e){var t=e.columnIndex,n=e.data,i=e.rowIndex,l=e.style,c=a.state.album,o=n[i*a.listColumnNum+t];return y.a.createElement(H,{key:o.id,style:l,item:o,goPlaylistdetails:a.props.RecycleBin.goPlaylistdetails,album:c})},a.onBigImg=function(e){var t=a.state,n=t.realNum,i=t.list,l=i[e];a.imgidx=e,a.setState({bImg_visible:!0,imgfile:l}),/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(i[e].ext)?(e+1<n&&(/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(i[e+1].ext)||Object(B.j)(B.h.file_b(i[e+1].id))),e-1>=0&&(/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(i[e-1].ext)||Object(B.j)(B.h.file_b(i[e-1].id)))):(e+1<n&&(/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(i[e+1].ext)||Object(B.j)(B.h.file_b(i[e+1].id))),e-1<0||/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(i[e-1].ext)||Object(B.j)(B.h.file_b(i[e-1].id)))},a.onPiece=function(){a.imgidx-1>=0?a.onBigImg(a.imgidx-1):(a.imgidx=a.state.realNum-1,a.onBigImg(a.imgidx),d.a.warning(a.props.t("lastOne")))},a.nextPage=function(){if(a.imgidx+1>=a.state.realNum)return a.imgidx=0,a.onBigImg(a.imgidx),void d.a.warning(a.props.t("firstOne"));a.onBigImg(a.imgidx+1)},a.closeDialog=function(){a.setState({bImg_visible:!1})},a.thumbnail=function(e){var t=e.columnIndex,n=e.data,i=e.rowIndex,l=e.style,c=i*a.columnCount+t,o=n[c];return y.a.createElement(z,{index:c,item:o,style:l,onBigImg:a.onBigImg})},a.toPlaceClick=function(e){var t=e.key;a.adaption(),a.setState({visible:!0}),"0"===t?Object(I.b)("playlist_list",null).then((function(e){a.util2(e,!1)})):"1"===t&&Object(I.b)("album_list",null).then((function(e){a.util2(e,!0)}))},a.handleCancel=function(){a.setState({visible:!1,confirmLoading:!1,toPlaceInint:!1}),a.props.RecycleBin.ToPlaceDelete()},a.remove=function(){u.a.confirm({title:"Are you sure to delete these files?",content:"Deletion cannot be restored",onOk:function(){var e=a.state.list.filter((function(e){return e.id})),t=Array.from(a.props.RecycleBin.selectItems);Object(I.b)("file_delete_unused",t,1).then((function(n){t.forEach((function(t){var a=e.findIndex((function(e){return e.id===t}));e.splice(a,1)})),a.util(e),a.props.RecycleBin.delete()}))},onCancel:function(){}})},a.handleOk=function(){var e=[],t=[],n=a.state.list,i=a.state.album,l=a.props.RecycleBin,c=l.selectItems,o=l.seleceds;a.setState({confirmLoading:!0}),Array.from(c).forEach((function(e){t.push({id:e})})),Array.from(o).forEach((function(a){if(i){var n={id:a,list:t};e.push(Object(I.b)("album_add_files",n))}else{var l={id:a,list:t,index:0};e.push(Object(I.b)("playlist_save_to",l))}})),Promise.all(e).finally((function(){d.a.success(a.props.t("successful")),Array.from(c).forEach((function(e){var t=n.findIndex((function(t){return t.id===e}));n.splice(t,1)})),a.setState({visible:!1,confirmLoading:!1,list:n}),a.props.RecycleBin.delete(),a.props.RecycleBin.ToPlaceDelete()}))},a.goblack=function(){a.props.history.push("/")},a.imgRef=y.a.createRef(),a.playlistInner=y.a.createRef(),a.state={inint:!1,list:[],realNum:0,rowCount:0,toItems:[{name:"Playlist"},{name:"Alubm"}],visible:!1,toPlaceInint:!1,toPlaceData:[],seleceds:new Set,bImg_visible:!1,imgfile:{},listNum:0},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(I.b)("file_unused",null).then((function(t){e.util(t)}))}},{key:"componentWillUnmount",value:function(){this.props.RecycleBin.reset()}},{key:"render",value:function(){var e=this,t=this.state,a=t.inint,n=t.list,i=t.realNum,l=t.toItems,c=t.visible,o=t.confirmLoading,s=t.toPlaceInint,r=t.toPlaceData,m=t.album,d=t.bImg_visible,f=t.imgfile,h=t.listNum,p=this.props.RecycleBin,g=p.selectItems,b=p.checkAll,v=p.invert,j=p.ToPlaceCheckAll,w=p.seleceds,O=p.ToPlaceInvert;return y.a.createElement("div",{className:"ClearPhoto"},y.a.createElement("div",{className:"clear_header"},y.a.createElement(k.a,{go:this.goblack,name:this.props.t("temporaryFiles")})),y.a.createElement(P,{selectNum:g.size,dataNum:i,oncheck:function(){b(n)},invert:function(){v(n)},remove:this.remove,toPlace:l,toPlaceClick:this.toPlaceClick}),y.a.createElement("div",{ref:this.imgRef,className:"imglist_box"},a?n.length>0?y.a.createElement(E.a,null,(function(t){var a=t.height,n=t.width,i=e.state.list;return e.getWH(),e.rowCount=i.length/e.columnCount,y.a.createElement(N.a,{className:"Grid",itemData:i,rowCount:e.rowCount,columnCount:e.columnCount,columnWidth:e.childW,height:a,rowHeight:e.childH,width:n},e.thumbnail)})):y.a.createElement(R.a,null):y.a.createElement(x.a,null)),y.a.createElement(u.a,{title:m?"Albums":"Playlists",visible:c,onOk:this.handleOk,confirmLoading:o,onCancel:this.handleCancel,width:900,getContainer:!1},y.a.createElement("div",{className:"ToPlace-inner"},s&&y.a.createElement(P,{selectNum:w.size,dataNum:h,oncheck:function(){j(r)},invert:function(){O(r)}}),y.a.createElement("div",{className:"list-inner",ref:this.playlistInner},s?r.length>0?y.a.createElement(E.a,null,(function(t){var a=t.height,n=t.width;return e.adaption(),e.listRowNum=r.length/e.listColumnNum,y.a.createElement(N.a,{className:"Grid",itemData:r,rowCount:e.listRowNum,columnCount:e.listColumnNum,columnWidth:e.PchildW,height:a,rowHeight:e.PchildH,width:n},e.toListRender)})):y.a.createElement(R.a,null):y.a.createElement(x.a,null)))),d&&y.a.createElement(q,{closeDialog:this.closeDialog,imgfile:f,onPiece:this.onPiece,nextPage:this.nextPage}))}}]),t}(v.Component))||m)||m)||m;t.default=K}}]);
//# sourceMappingURL=19.bef43859.chunk.js.map