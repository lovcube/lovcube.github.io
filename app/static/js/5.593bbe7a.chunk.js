(this.webpackJsonplovcube=this.webpackJsonplovcube||[]).push([[5],{803:function(e,t,i){"use strict";i(209);var a,n,s,o,c,l,r,u=i(128),h=(i(76),i(10)),p=i(4),f=i(9),m=i(12),d=i(20),b=i(21),v=i(19),g=i(22),y=i(3),w=(i(63),i(0)),O=i.n(w),j=(i(825),i(1)),E=i(6),S=(i(77),i(18)),k=i(849),M=i(34),X=Object(M.b)()(a=function(e){function t(){var e,i;Object(f.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(i=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(n)))).state={inner:!1,load:!1},i.resize=function(){window.innerWidth<900?i.state.inner||i.setState({inner:!0}):i.state.inner&&i.setState({inner:!1})},i}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.resize(),this.player.subscribeToStateChange(this.handleStateChange.bind(this)),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.setState({load:!1})}},{key:"handleStateChange",value:function(e){var t=this;this.player.video.handleError=function(){S.a.error(t.props.t("Videofailed"))},this.state.load||4===e.readyState&&this.setState({load:!0})}},{key:"render",value:function(){var e=this,t=this.props,i=t.poster,a=t.src;return O.a.createElement("div",{id:"VIDEOBOX"},O.a.createElement(h.a,{className:"icon-load",type:"loading",style:{fontSize:70,display:"".concat(this.state.load?"none":"block")},spin:!0}),O.a.createElement(k.Player,{ref:function(t){e.player=t},playsInline:!0,fluid:!1,poster:i,src:a,preload:"auto",autoPlay:!0,height:this.state.inner?window.innerHeight/2:600,width:this.state.inner?window.innerHeight:900,className:"p_video"},O.a.createElement(k.BigPlayButton,{position:"center"})))}}]),t}(w.Component))||a,Y=i(37),N=i(16),R=/(mp4|avi|rmvb|rm|wmv|mov|mpg|mpeg|flv|mkv|3gp|webm|ts|m3u8)$/,z=Object(Y.c)((s=function(e){function t(e){var i;return Object(f.a)(this,t),i=Object(d.a)(this,Object(b.a)(t).call(this,e)),Object(p.a)(i,"scale",o,Object(v.a)(i)),Object(p.a)(i,"filg",c,Object(v.a)(i)),Object(p.a)(i,"width",l,Object(v.a)(i)),Object(p.a)(i,"height",r,Object(v.a)(i)),i.zoom=function(e){R.test(i.props.imgfile.ext)||(e.deltaY>0?i.scale>=.25&&(i.scale-=.05):i.scale<=4&&(i.scale+=.05),i.scale<1?i.times=1-i.scale+1:i.times=1)},i.cptShow=function(){var e=i.props.imgfile;i.setState({cptModle:!0}),i.inputRef.current.value=Object(j.h)(e,"cpt")||""},i.cptHide=function(){i.setState({cptModle:!1}),i.inputRef.current.value=""},i.addcpt=function(e){i.cptHide(),(Object(j.h)(i.props.imgfile,"cpt")||"")!==e&&i.props.blur(e)},i.inputRef=O.a.createRef(),i.imgRef=O.a.createRef(),i.state={load:!1,X:0,Y:0,url:"",cptModle:!1},i.moving=!1,i.lastX=null,i.lastY=null,i.times=1,window.onmouseup=function(e){i.onMouseUp(e)},window.onmousemove=function(e){i.onMouseMove(e)},i}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.imgfile;Object(E.i)(E.h.file_s(t.id),(function(t,i){if(!e.isUnmount){var a=i.width/2,n=i.height/2;e.setState({X:-a,Y:-n})}})),Object(E.i)(E.h.file_b(t.id),(function(t){e.isUnmount||e.setState({url:t,load:!0},(function(){var t=e.imgRef.current.offsetWidth/2,i=e.imgRef.current.offsetHeight/2;e.setState({X:-t,Y:-i})}))}))}},{key:"componentWillUnmount",value:function(){this.isUnmount=!0}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.imgfile.id!==e.imgfile.id&&(this.scale=1,this.times=1,this.setState({load:!1}),Object(E.i)(E.h.file_s(e.imgfile.id),(function(e,i){if(!t.isUnmount){var a=i.width/2,n=i.height/2;t.setState({X:-a,Y:-n})}})),Object(E.i)(E.h.file_b(e.imgfile.id),(function(e){t.isUnmount||t.setState({url:e,load:!0},(function(){var e=t.imgRef.current.offsetWidth/2,i=t.imgRef.current.offsetHeight/2;t.setState({X:-e,Y:-i})}))})))}},{key:"onMouseDown",value:function(e){R.test(this.props.imgfile.ext)||(e.stopPropagation(),e.preventDefault(),this.filg=!0,this.moving=!0)}},{key:"onMouseUp",value:function(){this.filg=!1,this.moving=!1,this.lastX=null,this.lastY=null}},{key:"onMouseMove",value:function(e){this.moving&&this.onMove(e)}},{key:"onMove",value:function(e){if(this.lastX&&this.lastY){var t=e.clientX-this.lastX,i=e.clientY-this.lastY;this.setState({X:this.state.X+t*this.times,Y:this.state.Y+i*this.times})}this.lastX=e.clientX,this.lastY=e.clientY}},{key:"render",value:function(){var e,t=this,i=this.props,a=i.closeDialog,n=i.imgfile,s=i.onPiece,o=i.nextPage,c=i.blur;return e=R.test(n.ext)?O.a.createElement(X,{poster:E.h.file_s(n.id),src:E.h.file_b(n.id)}):O.a.createElement("img",{src:this.state.load?this.state.url:E.h.file_s(n.id),alt:n.id}),O.a.createElement("div",{className:"dialog treeNodeUnselectable"},O.a.createElement("span",{className:"close-dialog",onClick:a},O.a.createElement(h.a,{type:"close"})),O.a.createElement("div",{id:"imgbody",className:"dialog-boby",onWheel:this.zoom,onMouseUp:this.up},O.a.createElement("div",{id:"imgbox",className:"img-wrap-clear",ref:this.imgRef,onMouseDown:function(e){t.onMouseDown(e)},style:{transform:R.test(n.ext)?"scale(".concat(this.scale,") translateX(-50%)translateY(-50%)"):"scale(".concat(this.scale,") translateX(").concat(this.state.X,"px)translateY(").concat(this.state.Y,"px)")}},!R.test(n.ext)&&!this.state.load&&O.a.createElement(h.a,{className:"icon-load",type:"loading",style:{fontSize:70,color:"#fff"},spin:!0}),e),O.a.createElement("div",{className:"onPiece ".concat(this.filg?"hide":""),onClick:s},O.a.createElement("span",{className:"pre-arrow"},O.a.createElement(h.a,{type:"left"}))),O.a.createElement("div",{className:"nextPage ".concat(this.filg?"hide2":""),onClick:o},O.a.createElement("span",{className:"next-arrow"},O.a.createElement(h.a,{type:"right"}))),c&&O.a.createElement("div",{className:"operation ".concat(this.filg?"hide3":"")},O.a.createElement("span",{ref:this.cptRef,className:"ellipsis",style:Object(j.h)(n,"cpt")?{color:"#FFF"}:{color:"#fff"},onClick:this.cptShow},Object(j.h)(n,"cpt")?Object(j.h)(n,"cpt"):"".concat(N.a.t("adddescription"),"...")))),O.a.createElement(u.a,{title:N.a.t("AddCpt"),visible:this.state.cptModle,onOk:function(){t.addcpt(t.inputRef.current.value)},onCancel:this.cptHide,getContainer:!1,centered:!0},O.a.createElement("div",{className:"cpt-inner-input"},O.a.createElement("input",{type:"text",ref:this.inputRef,maxLength:100,autoFocus:!0,placeholder:N.a.t("enterdescription")}))))}}]),t}(O.a.Component),o=Object(y.a)(s.prototype,"scale",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=Object(y.a)(s.prototype,"filg",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=Object(y.a)(s.prototype,"width",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r=Object(y.a)(s.prototype,"height",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n=s))||n;t.a=z},825:function(e,t,i){}}]);
//# sourceMappingURL=5.593bbe7a.chunk.js.map