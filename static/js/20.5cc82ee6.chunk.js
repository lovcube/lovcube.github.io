(this.webpackJsonpframeweb=this.webpackJsonpframeweb||[]).push([[20],{945:function(e,t,a){},993:function(e,t,a){"use strict";a.r(t);a(72);var i,n,c,l,r,o,m,s,u,b,p,d,f,h,O,j,g,v,E,y,w,N=a(13),k=a(51),x=a.n(k),z=a(4),C=a(8),A=a(10),R=a(21),_=a(22),L=a(18),I=a(23),H=a(2),W=(a(53),a(0)),D=a.n(W),F=a(39),P=a(1),M=a(43),U=a.n(M),S=a(765),G=a(758),J=a(36),T=(a(945),a(187),a(117)),$=a(6),q=a(729),B=a.n(q),K=(a(779),Object(F.b)("albumdetail","login")(i=Object(F.c)(i=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(R.a)(this,Object(_.a)(t).call(this,e))).errorImg=function(e){e.target.src=B.a},a.imgRef=D.a.createRef(),a}return Object(I.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.columnIndex,a=e.data[e.rowIndex*this.props.albumdetail.columnCount+t];if(a){var i=$.h.file_s(a.id);this.imgRef.current&&(this.imgRef.current.style.background="#d3d3d3 url(".concat(i,") center center no-repeat"))}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.columnIndex,a=e.data[e.rowIndex*this.props.albumdetail.columnCount+t];if(a){var i=$.h.file_s(a.id);this.imgRef.current&&(this.imgRef.current.style.background="#d3d3d3 url(".concat(i,") center center no-repeat"))}}},{key:"render",value:function(){var e=this.props,t=e.columnIndex,a=e.data,i=e.rowIndex,n=e.style,c=this.props.albumdetail,l=c.columnCount,r=c.checkclick,o=c.b_img_show,m=a[i*l+t],s=this.props.login.OS,u="tab"===s?{visible:!1}:{};try{return Object(P.h)(m,"true")?D.a.createElement("div",{style:n}):D.a.createElement(T.a,Object.assign({title:m.cpt,overlayClassName:"tooltip"},u),D.a.createElement("div",{className:"thumbnail ".concat(Object(P.h)(m,"check")?"selected":""),style:n,ref:this.imgRef,onClick:function(){o(i*l+t,m.id)}},D.a.createElement("i",{style:"tab"===s?{visibility:"inherit"}:{},className:"iconfont checkIcon treeNodeUnselectable ".concat(Object(P.h)(m,"check")?"icon-xuanzhong1":"icon-weixuanzhong"),onClick:function(e){r(e,i*l+t)}}),D.a.createElement("span",{className:"sign"},i*l+t+1),"gif"===m.ext&&D.a.createElement("i",{className:"iconfont GIF-IMG"},"\ue670"),m.cpt&&D.a.createElement("i",{className:"iconfont icon"},"\ue604"),/(avi|mov|rmvb|rm|flv|mp4|3gb)$/.test(m.ext)&&D.a.createElement("i",{className:"iconfont v_icon"},"\ue6ae")))}catch(b){return D.a.createElement("div",{style:n})}}}]),t}(D.a.PureComponent))||i)||i),Q=a(780),V=a(264),X=a(263),Y=a(781),Z=a(813),ee=a(7),te=a(739),ae=Object(J.b)()(n=Object(F.b)("photoalbum","uploadFiles","login","albumdetail")(n=Object(F.c)((c=function(e){function t(e){var a;return Object(C.a)(this,t),a=Object(R.a)(this,Object(_.a)(t).call(this,e)),Object(z.a)(a,"num",l,Object(L.a)(a)),Object(z.a)(a,"init",r,Object(L.a)(a)),Object(z.a)(a,"albumdetailList",o,Object(L.a)(a)),Object(z.a)(a,"removeFileids",m,Object(L.a)(a)),Object(z.a)(a,"checkAll",s,Object(L.a)(a)),Object(z.a)(a,"visible",u,Object(L.a)(a)),Object(z.a)(a,"imgfile",b,Object(L.a)(a)),Object(z.a)(a,"imgidx",p,Object(L.a)(a)),Object(z.a)(a,"info_visible",d,Object(L.a)(a)),Object(z.a)(a,"list",f,Object(L.a)(a)),Object(z.a)(a,"filenum",h,Object(L.a)(a)),Object(z.a)(a,"page",O,Object(L.a)(a)),Object(z.a)(a,"hasMoreItems",j,Object(L.a)(a)),Object(z.a)(a,"number",g,Object(L.a)(a)),Object(z.a)(a,"infoObj",v,Object(L.a)(a)),Object(z.a)(a,"name",E,Object(L.a)(a)),Object(z.a)(a,"id",y,Object(L.a)(a)),Object(z.a)(a,"created",w,Object(L.a)(a)),a.initialData=[],a.getWH=function(e){try{var t,i,n=165;a.w=a.contentRef.current.offsetWidth,a.h=a.contentRef.current.offsetHeight;var c=a.contentRef.current.offsetWidth-18;return i=(t=c%n/Math.floor(c/n)+n)/n*150,a.childW=t,a.childH=i,a.columnCount=Math.floor(c/n),e||a.getH(),a.columnCount}catch(l){}},a.getH=function(){var e=a.props.albumdetail.albumdetail;a.rowCount=e.length/a.columnCount},a.myresize=function(){a.props.albumdetail.resize(a.getWH)},a.info_show=function(){var e=[{id:1,icon:"file-image",txt:"Photo",data:a.props.albumdetail.filenum},{id:2,icon:"clock-circle",txt:"CreationTime",data:U()(a.created).format(a.props.t("LL"))},{id:3,icon:"clock-circle",txt:"LastUpdate",data:U()(a.props.albumdetail.updated).format(a.props.t("LL"))}];a.info_visible=!0,a.infoObj=e},a.uploading=function(e,t){var i=Object(L.a)(a).id;a.props.uploadFiles.upFile(e,i,t)},a.goblack=function(){a.props.history.push("/album")},a.contentRef=D.a.createRef(),a.daughterRef=D.a.createRef(),a}return Object(I.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,i,n,c,l;return x.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e=this.props.match.params.id,t=this.props.photoalbum.urlData,a=t.name,i=t.created,n=t.updated,this.id=Number(e),a){r.next=15;break}return r.next=7,x.a.awrap(Object(ee.b)("album_list",null));case 7:c=r.sent,-1===(l=c.findIndex((function(t){return t.id===Number(e)})))&&this.props.history.push("/album"),this.name=c[l].name,this.created=c[l].created,this.props.albumdetail.update(c[l].updated||c[l].created),r.next=18;break;case 15:this.name=a,this.created=i,this.props.albumdetail.update(n);case 18:this.props.albumdetail.getData(this.id,this.getWH,this.getH),window.addEventListener("resize",this.myresize),r.next=26;break;case 22:r.prev=22,r.t0=r.catch(0),this.props.history.push("/album");case 26:case"end":return r.stop()}}),null,this,[[0,22]])}},{key:"componentWillUnmount",value:function(){this.props.albumdetail.clearData(),window.removeEventListener("resize",this.myresize)}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.info_visible,i=this.name,n=this.created,c=this.props.albumdetail,l=c.init,r=c.albumdetail,o=c.filenum,m=c.removeFileids,s=c.oncheckAll,u=c.remove_img,b=c.closeDialog,p=c.visible,d=c.imgfile,f=c.onPiece,h=c.nextPage,O=c.addCpt,j=c.invert,g=c.updated,v=0;return m.forEach((function(e){e.true||(v+=1)})),D.a.createElement("div",{className:"Albumdetails"},D.a.createElement("div",{className:"Albumdetails-header"},D.a.createElement(te.a,{go:this.goblack,name:i}),D.a.createElement("div",{className:"a-details-information"},D.a.createElement(Q.a,{className:"upphoto-btn",onupload:this.uploading}),D.a.createElement("div",{className:"Album-file-num"},D.a.createElement("div",{className:"a-d-i-icon"},D.a.createElement("i",{className:"iconfont icon"},"\ue785")),D.a.createElement("div",{className:"Album-num-text"},D.a.createElement("p",{className:"text"},t("Photo")),D.a.createElement("p",{className:"num"},o))),D.a.createElement("div",{className:"Album-creation-time"},D.a.createElement("div",{className:"a-d-i-icon"},D.a.createElement("span",{className:"creation-time-icon"})),D.a.createElement("div",{className:"Album-num-text"},D.a.createElement("p",{className:"text"},t("CreationTime")),D.a.createElement("p",{className:"num"},n&&U()(n).format(t("LL"))))),D.a.createElement("div",{className:"Album-last-update"},D.a.createElement("div",{className:"a-d-i-icon"},D.a.createElement("span",{className:"last-update-icon"})),D.a.createElement("div",{className:"Album-num-text"},D.a.createElement("p",{className:"text"},t("LastUpdate")),D.a.createElement("p",{className:"num"},g&&U()(g).format(t("LL"))))),D.a.createElement("div",{className:"Album-info-btn",onClick:this.info_show},D.a.createElement(N.a,{type:"exclamation"})))),D.a.createElement("div",{className:"Album-operation"},l&&D.a.createElement("div",{className:"checkAll"},D.a.createElement("i",{className:"iconfont a-check-frame treeNodeUnselectable ".concat(r.length===m.length&&r.length>0?"icon-xuanzhong1":"icon-weixuanzhong"),onClick:s}),D.a.createElement("span",{className:"a-checkAll-text"},v>0?"".concat(t("Selected")," ").concat(v," ").concat(t("file")):t("Allelection")),m.length>0&&D.a.createElement("span",{onClick:j,className:"invert-Selection"},t("Reverseselection"))),D.a.createElement("div",{className:"Album-delete",style:m.length>0?null:{visibility:"hidden"}},D.a.createElement("span",{onClick:u},D.a.createElement(N.a,{type:"delete"}),t("delete")))),D.a.createElement("div",{ref:this.contentRef,className:"Albumdetails-main"},l?r.length>0?D.a.createElement(G.a,null,(function(t){var a=t.height,i=t.width;return D.a.createElement(S.a,{className:"Grid",itemData:r,rowCount:e.rowCount,columnCount:e.columnCount,columnWidth:e.childW,height:a,rowHeight:e.childH,width:i},K)})):D.a.createElement(X.a,null):D.a.createElement(V.a,null)),p&&D.a.createElement(Z.a,{closeDialog:b,imgfile:d,onPiece:f,nextPage:h,blur:O}),a&&D.a.createElement(Y.a,{data:this.infoObj,handlecancel:function(){e.info_visible=!1}}))}}]),t}(W.Component),l=Object(H.a)(c.prototype,"num",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),r=Object(H.a)(c.prototype,"init",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=Object(H.a)(c.prototype,"albumdetailList",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=Object(H.a)(c.prototype,"removeFileids",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=Object(H.a)(c.prototype,"checkAll",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(H.a)(c.prototype,"visible",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=Object(H.a)(c.prototype,"imgfile",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=Object(H.a)(c.prototype,"imgidx",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=Object(H.a)(c.prototype,"info_visible",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=Object(H.a)(c.prototype,"list",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(H.a)(c.prototype,"filenum",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=Object(H.a)(c.prototype,"page",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=Object(H.a)(c.prototype,"hasMoreItems",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=Object(H.a)(c.prototype,"number",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.num}}),v=Object(H.a)(c.prototype,"infoObj",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=Object(H.a)(c.prototype,"name",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=Object(H.a)(c.prototype,"id",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=Object(H.a)(c.prototype,"created",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=c))||n)||n)||n;t.default=ae}}]);
//# sourceMappingURL=20.5cc82ee6.chunk.js.map