(this.webpackJsonplovcube=this.webpackJsonplovcube||[]).push([[5],{805:function(e,t,i){"use strict";i(211);var a,n,s,o,c,l,r,u=i(130),h=(i(75),i(9)),p=i(4),f=i(10),m=i(12),d=i(19),v=i(20),b=i(17),g=i(21),y=i(3),w=(i(64),i(0)),O=i.n(w),E=i(1),j=i(6),S=(i(80),i(23)),k=i(851),M=i(31),X=Object(M.b)()(a=function(e){function t(){var e,i;Object(f.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(i=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(n)))).state={inner:!1,load:!1},i.resize=function(){window.innerWidth<900?i.state.inner||i.setState({inner:!0}):i.state.inner&&i.setState({inner:!1})},i}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.resize(),this.player.subscribeToStateChange(this.handleStateChange.bind(this)),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.setState({load:!1})}},{key:"handleStateChange",value:function(e){var t=this;this.player.video.handleError=function(){S.a.error(t.props.t("Videofailed"))},this.state.load||4===e.readyState&&this.setState({load:!0})}},{key:"render",value:function(){var e=this,t=this.props,i=t.poster,a=t.src;return O.a.createElement("div",{id:"VIDEOBOX"},O.a.createElement(h.a,{className:"icon-load",type:"loading",style:{fontSize:70,display:"".concat(this.state.load?"none":"block")},spin:!0}),O.a.createElement(k.Player,{ref:function(t){e.player=t},playsInline:!0,fluid:!1,poster:i,src:a,preload:"auto",autoPlay:!0,height:this.state.inner?window.innerHeight/2:600,width:this.state.inner?window.innerHeight:900,className:"p_video"},O.a.createElement(k.BigPlayButton,{position:"center"})))}}]),t}(w.Component))||a,Y=i(37),N=i(15),R=(i(831),/(mp4|avi|rmvb|rm|wmv|mov|mpg|mpeg|flv|mkv|3gp|webm|ts|m3u8)$/),z=Object(Y.c)((s=function(e){function t(e){var i;return Object(f.a)(this,t),i=Object(d.a)(this,Object(v.a)(t).call(this,e)),Object(p.a)(i,"scale",o,Object(b.a)(i)),Object(p.a)(i,"filg",c,Object(b.a)(i)),Object(p.a)(i,"width",l,Object(b.a)(i)),Object(p.a)(i,"height",r,Object(b.a)(i)),i.zoom=function(e){R.test(i.props.ext)||(e.deltaY>0?i.scale>=.25&&(i.scale-=.05):i.scale<=4&&(i.scale+=.05),i.scale<1?i.times=1-i.scale+1:i.times=1)},i.cptShow=function(){var e=i.props.cpt;i.setState({cptModle:!0}),i.inputRef.current.value=e||""},i.cptHide=function(){i.setState({cptModle:!1}),i.inputRef.current.value=""},i.addcpt=function(e){i.cptHide(),(i.props.cpt||"")!==e&&i.props.blur(e)},i.inputRef=O.a.createRef(),i.imgRef=O.a.createRef(),i.state={load:!1,X:0,Y:0,url:"",cptModle:!1},i.moving=!1,i.lastX=null,i.lastY=null,i.times=1,window.onmouseup=function(e){i.onMouseUp(e)},window.onmousemove=function(e){i.onMouseMove(e)},i}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.id;Object(j.i)(j.h.file_s(t),(function(t,i){if(!e.isUnmount){var a=i.width/2,n=i.height/2;e.setState({X:-a,Y:-n})}})),Object(j.i)(j.h.file_b(t),(function(t){e.isUnmount||e.setState({url:t,load:!0},(function(){var t=e.imgRef.current.offsetWidth/2,i=e.imgRef.current.offsetHeight/2;e.setState({X:-t,Y:-i})}))}))}},{key:"componentWillUnmount",value:function(){this.isUnmount=!0}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.id!==e.id&&(this.scale=1,this.times=1,this.setState({load:!1}),Object(j.i)(j.h.file_s(e.id),(function(e,i){if(!t.isUnmount){var a=i.width/2,n=i.height/2;t.setState({X:-a,Y:-n})}})),Object(j.i)(j.h.file_b(e.id),(function(e){t.isUnmount||t.setState({url:e,load:!0},(function(){var e=t.imgRef.current.offsetWidth/2,i=t.imgRef.current.offsetHeight/2;t.setState({X:-e,Y:-i})}))})))}},{key:"onMouseDown",value:function(e){R.test(this.props.ext)||(e.stopPropagation(),e.preventDefault(),this.filg=!0,this.moving=!0)}},{key:"onMouseUp",value:function(){this.filg=!1,this.moving=!1,this.lastX=null,this.lastY=null}},{key:"onMouseMove",value:function(e){this.moving&&this.onMove(e)}},{key:"onMove",value:function(e){if(this.lastX&&this.lastY){var t=e.clientX-this.lastX,i=e.clientY-this.lastY;this.setState({X:this.state.X+t*this.times,Y:this.state.Y+i*this.times})}this.lastX=e.clientX,this.lastY=e.clientY}},{key:"render",value:function(){var e,t=this,i=this.props,a=i.id,n=i.cpt,s=i.ext,o=i.closeDialog,c=i.onPiece,l=i.nextPage,r=i.blur;return e=R.test(s)?O.a.createElement(X,{poster:j.h.file_s(a),src:j.h.file_b(a)}):O.a.createElement("img",{src:this.state.load?this.state.url:j.h.file_s(a),alt:a}),O.a.createElement("div",{className:"dialog treeNodeUnselectable"},O.a.createElement("span",{className:"close-dialog",onClick:o},O.a.createElement(h.a,{type:"close"})),O.a.createElement("div",{id:"imgbody",className:"dialog-boby",onWheel:this.zoom,onMouseUp:this.up},O.a.createElement("div",{id:"imgbox",className:"img-wrap-clear",ref:this.imgRef,onMouseDown:function(e){t.onMouseDown(e)},style:{transform:R.test(s)?"scale(".concat(this.scale,") translateX(-50%)translateY(-50%)"):"scale(".concat(this.scale,") translateX(").concat(this.state.X,"px)translateY(").concat(this.state.Y,"px)")}},!R.test(s)&&!this.state.load&&O.a.createElement(h.a,{className:"icon-load",type:"loading",style:{fontSize:70,color:"#fff"},spin:!0}),e),O.a.createElement("div",{className:"onPiece ".concat(this.filg?"hide":""),onClick:c},O.a.createElement("span",{className:"pre-arrow"},O.a.createElement(h.a,{type:"left"}))),O.a.createElement("div",{className:"nextPage ".concat(this.filg?"hide2":""),onClick:l},O.a.createElement("span",{className:"next-arrow"},O.a.createElement(h.a,{type:"right"}))),r&&O.a.createElement("div",{className:"operation ".concat(this.filg?"hide3":"")},O.a.createElement("span",{ref:this.cptRef,className:"ellipsis",style:{color:"#FFF"},onClick:this.cptShow},n||"".concat(N.a.t("adddescription"),"...")))),O.a.createElement(u.a,{title:N.a.t("AddCpt"),visible:this.state.cptModle,onOk:function(){t.addcpt(t.inputRef.current.value)},onCancel:this.cptHide,getContainer:!1,centered:!0},O.a.createElement("div",{className:"cpt-inner-input"},O.a.createElement("input",{type:"text",ref:this.inputRef,maxLength:100,autoFocus:!0,placeholder:N.a.t("enterdescription")}))))}}]),t}(O.a.Component),o=Object(y.a)(s.prototype,"scale",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=Object(y.a)(s.prototype,"filg",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=Object(y.a)(s.prototype,"width",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r=Object(y.a)(s.prototype,"height",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n=s))||n;t.a=z},831:function(e,t,i){}}]);
//# sourceMappingURL=5.eb1364a0.chunk.js.map