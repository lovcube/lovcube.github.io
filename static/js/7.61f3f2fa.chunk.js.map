{"version":3,"sources":["components/Perfectinformation/Questions.js","components/Perfectinformation/index.js","components/Headportrait/SelectProfilePic.js","components/Headportrait/index.js"],"names":["Questions","withTranslation","create","name","this","props","form","setFieldsValue","text","val","visible","onCancel","onCreate","t","getFieldDecorator","title","okText","onOk","getContainer","Item","label","rules","required","message","whitespace","max","autoComplete","placeholder","Component","Option","Perfectinformation","inject","withRouter","observer","show","e","nativeEvent","stopImmediatePropagation","setState","pro_visible","fiag","setCustom","custom","checkId","setTimeout","customRef","current","focus","input_focus","txt","input_blur","headporId","_","id","login","changeInfo","profile_id","handleSubmit","preventDefault","validateFieldsAndScroll","err","values","data","nickname","trim","email","pwd_question","question","pwd_answer","answer","state","error","info_login","user","storage","get","pwd","login_in","history","push","handleCancel","handleCreate","formRef","validateFields","resetFields","saveFormRef","getAvatar","host","user_id","addItem","getFieldValue","questionVal","AnswerValidity","rule","value","callback","length","taskStr","check_email","wsget","target","then","res","catch","nameRef","React","createRef","emailRef","answerRef","head_visible","problemList","userdata","match","params","Number","remove","stopPropagation","idx","findIndex","el","problem","check_e","hasFeedback","validateStatus","className","Header","buyUrl","xs","span","onClick","alt","src","size","icon","type","labelCol","sm","wrapperCol","onSubmit","placement","overlayClassName","trigger","pattern","reg","maxLength","onBlur","dropdownRender","menu","style","margin","padding","cursor","onMouseDown","map","item","key","offset","htmlType","wrappedComponentRef","Headportrait","SelectProfilePic","image","myCropper","afterImg","Cropper","viewMode","dragMode","initialAspectRatio","aspectRatio","preview","background","autoCropArea","zoomOnWheel","replace","img","confirm","cancel","ref","handleChange","files","file","i18next","reader","FileReader","addEventListener","result","readAsDataURL","getBase64","imageUrl","handleconfirm","cropper","loading","content","duration","afterimg","getCroppedCanvas","imageSmoothingQuality","toDataURL","wordArray","CryptoJS","lib","WordArray","hash","SHA256","toString","blob","dataURLtoBlob","ajaxPromise","getCookie","success","imageRef","accept","onChange"],"mappings":"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","file":"static/js/7.61f3f2fa.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { Modal, Form, Input } from 'antd';\n\n@withTranslation()\n@Form.create({ name: 'questions' })\nclass Questions extends Component {\n  componentDidMount(){\n    this.props.form.setFieldsValue({\n      text: this.props.val\n    })\n  }\n\n  render() {\n    const { visible, onCancel, onCreate, form, t } = this.props;\n    const { getFieldDecorator } = form;\n    return (\n      <Modal\n        visible={visible}\n        title={t('CustomQuestions')}\n        okText={t('Determine')}\n        onOk={onCreate}\n        onCancel={onCancel}\n        getContainer={false}\n      >\n        <Form.Item label={t(\"securityQuestion\")}>\n            {getFieldDecorator('text', {\n              rules: [\n                { required: true, message: t('enterQuestion'), whitespace: true },\n                { max: 100, message: t('Notmorechar') }\n              ],\n            })(<Input\n              autoComplete=\"off\"\n              placeholder={t('enterQuestion')} />)}\n        </Form.Item>\n      </Modal>\n    );\n  }\n}\n\nexport default Questions;","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Tooltip, message, Icon, Row, Col } from \"antd\";\nimport { Form, Input, Select, Button, Avatar, Divider } from \"antd\";\nimport { withTranslation } from \"react-i18next\";\nimport { inject, observer } from \"mobx-react\";\nimport \"./style.scss\";\nimport { trim, taskStr, storage, reg } from \"../../util/index\";\nimport { host, wsget } from \"../../ws\";\nimport Headportrait from \"../Headportrait\";\nimport Questions from \"./Questions\";\nimport Header from \"../Header\";\nimport { buyUrl } from \"../../util/url\";\n\nconst { Option } = Select;\n\n@withTranslation()\n@Form.create({ name: \"perfectinformation\" })\n@withRouter\n@inject(\"login\", \"playlist\", \"rahmen\", \"photoalbum\")\n@observer\nclass Perfectinformation extends Component {\n  constructor(props) {\n    super(props);\n    this.nameRef = React.createRef();\n    this.emailRef = React.createRef();\n    this.answerRef = React.createRef();\n    this.customRef = React.createRef();\n    this.t = this.props.t;\n    this.state = {\n      head_visible: false,\n      problemList: [\n        { id: 1, text: this.t(\"birthday\") },\n        { id: 2, text: this.t(\"yourmind\") },\n        { id: 3, text: this.t(\"favoriteperson\") },\n      ],\n      focus: null,\n      profile_id: null,\n      fiag: false,\n      visible: false,\n      user_id: null,\n      show: false,\n      questionVal: \"\",\n    };\n  }\n\n  componentDidMount() {\n    const userdata = storage.get(\"user\");\n    const { id } = this.props.match.params;\n    if (Number(id) === userdata.id) {\n      this.setState({ user_id: id });\n    } else {\n      if (userdata) {\n        wsget(\"user_logout\", null);\n      }\n      storage.remove(\"user\");\n      this.props.history.push(\"/login\");\n    }\n  }\n\n  change(e, id) {\n    e.stopPropagation();\n    const { problemList } = this.state;\n    const idx = problemList.findIndex((el) => el.id === id);\n    this.setState({\n      custom: false,\n      checkId: id,\n      problem: problemList[idx].text,\n      pro_visible: false,\n    });\n  }\n\n  show = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ pro_visible: true, fiag: true });\n  };\n\n  setCustom = (e) => {\n    // this.setState({custom: true})\n    this.setState({ custom: true, checkId: 0 });\n    setTimeout(() => {\n      this.customRef.current.focus();\n    }, 0);\n  };\n\n  input_focus = (e, txt) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ focus: txt });\n  };\n  input_blur = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ focus: null });\n  };\n\n  headporId = (_, id) => {\n    this.props.login.changeInfo('profile', { id })\n    this.setState({ profile_id: id });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        let data = {\n          nickname: trim(values.nickname),\n          email: values.email,\n          pwd_question: values.question,\n          pwd_answer: values.answer,\n        };\n        if (this.state.profile_id) {\n          data.profile_id = this.state.profile_id;\n        }\n        if (this.state.show) {\n          message.error(this.t(\"boundmail\"));\n          return;\n        }\n\n        this.props.login.info_login(data, () => {\n          let user = storage.get(\"user\");\n          const data = {\n            name: user.name,\n            pwd: user.pwd,\n          };\n          this.props.login.login_in(data, () => {\n            this.props.history.push(\"/\");\n          });\n        });\n      }\n    });\n  };\n\n  handleCancel = () => {\n    this.setState({ visible: false });\n  };\n\n  handleCreate = () => {\n    const { form } = this.formRef.props;\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n      this.props.form.setFieldsValue({\n        question: trim(values.text),\n      });\n      form.resetFields();\n      this.setState({ visible: false });\n    });\n  };\n\n  saveFormRef = (formRef) => {\n    this.formRef = formRef;\n  };\n\n  getAvatar = () => {\n    return `${host()}/uf/s/${this.state.profile_id}/${this.state.user_id}`;\n  };\n\n  addItem = () => {\n    const val = this.props.form.getFieldValue(\"question\") || \"\";\n    this.setState({\n      questionVal: val,\n      visible: true,\n    });\n  };\n\n  AnswerValidity = (rule, value, callback) => {\n    if (value.length < 2) {\n      return callback(this.props.t(\"answerValidity\"));\n    }\n    if (taskStr(value)) {\n      return callback();\n    }\n    callback(this.props.t(\"answerValidity\"));\n  };\n\n  check_email = (e) => {\n    wsget(\"user_check_email\", e.target.value)\n      .then((res) => {\n        this.setState({ show: true });\n      })\n      .catch((res) => {\n        if (res.state === 2) {\n          this.setState({ show: false });\n        }\n      });\n  };\n\n  render() {\n    const { t } = this.props;\n    const { getFieldDecorator } = this.props.form;\n    const {\n      problemList,\n      show,\n      head_visible,\n      profile_id,\n      questionVal,\n    } = this.state;\n\n    const check_e = show\n      ? {\n        hasFeedback: true,\n        validateStatus: \"error\",\n      }\n      : {};\n\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 8 },\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 },\n      },\n    };\n\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0,\n        },\n        sm: {\n          span: 16,\n          offset: 8,\n        },\n      },\n    };\n\n    return (\n      <div className=\"perfectinformation-content\">\n        <Header buyUrl={buyUrl} title={t(\"PerfectInfo\")} />\n        <div className=\"perfectinformation-inner\">\n          <div className=\"perfectinformation-head\">\n            <h2>{t(\"PerfectInfo\")}</h2>\n            <span className=\"hint\">ps:{t(\"required\")}</span>\n          </div>\n\n          <Row className=\"info_Avatar\">\n            <Col xs={{ span: 6 }}>\n              <span className=\"info_label\">{t(\"HeadPortrait\")}:</span>\n            </Col>\n            <Col xs={{ span: 18 }}>\n              <div\n                className=\"profile_picture\"\n                onClick={() => {\n                  this.setState({ head_visible: true });\n                }}\n              >\n                {profile_id ? (\n                  <img alt=\"profile\" src={this.getAvatar()} />\n                ) : (\n                    <Avatar size={56} icon=\"user\" />\n                  )}\n                <Icon className=\"right-rigth\" type=\"right\" />\n              </div>\n            </Col>\n          </Row>\n\n          <Form {...formItemLayout} onSubmit={this.handleSubmit}>\n            <Form.Item label={t(\"Nickname\")}>\n              <Tooltip\n                placement=\"topLeft\"\n                overlayClassName=\"tooltip\"\n                trigger=\"focus\"\n                title={t(\"regrule4\")}\n              >\n                {getFieldDecorator(\"nickname\", {\n                  rules: [\n                    {\n                      required: true,\n                      message: t(\"NicknameEmpty\"),\n                      whitespace: true,\n                    },\n                    { pattern: reg.nickname, message: t(\"nicknameValidity\") },\n                  ],\n                })(\n                  <Input\n                    autoComplete=\"off\"\n                    size=\"large\"\n                    maxLength={50}\n                    placeholder={t(\"SetNickname\")}\n                  />\n                )}\n              </Tooltip>\n            </Form.Item>\n\n            <Form.Item label={t(\"mailbox\")} {...check_e}>\n              {getFieldDecorator(\"email\", {\n                rules: [\n                  {\n                    pattern: reg.email,\n                    message: \"The input is not valid E-mail!\",\n                  },\n                  {\n                    required: true,\n                    message: t(\"MailboxEmpty\"),\n                  },\n                ],\n              })(\n                <Input\n                  onBlur={this.check_email}\n                  autoComplete=\"off\"\n                  size=\"large\"\n                  placeholder={t(\"SetMailbox\")}\n                />\n              )}\n            </Form.Item>\n            <Form.Item label={t(\"securityQuestion\")}>\n              {getFieldDecorator(\"question\", {\n                rules: [\n                  {\n                    required: true,\n                    message: t(\"selectQuestion\"),\n                  },\n                ],\n              })(\n                <Select\n                  size=\"large\"\n                  placeholder={t(\"selectQuestion\")}\n                  dropdownRender={(menu) => (\n                    <div>\n                      {menu}\n                      <Divider style={{ margin: \"4px 0\" }} />\n                      <div\n                        className=\"custom-issue\"\n                        style={{ padding: \"4px 8px\", cursor: \"pointer\" }}\n                        onMouseDown={(e) => e.preventDefault()}\n                        onClick={this.addItem}\n                      >\n                        <Icon type=\"plus\" /> {t(\"CustomQuestions\")}\n                      </div>\n                    </div>\n                  )}\n                >\n                  {problemList.map((item) => {\n                    return (\n                      <Option key={item.id} value={item.text}>\n                        {item.text}\n                      </Option>\n                    );\n                  })}\n                </Select>\n              )}\n            </Form.Item>\n            <Form.Item label={t(\"Answer\")}>\n              <Tooltip\n                placement=\"topLeft\"\n                overlayClassName=\"tooltip\"\n                trigger=\"focus\"\n                title={t(\"regrule6\")}\n              >\n                {getFieldDecorator(\"answer\", {\n                  rules: [\n                    {\n                      required: true,\n                      message: t(\"enterAnswer\"),\n                      whitespace: true,\n                    },\n                  ],\n                })(\n                  <Input\n                    size=\"large\"\n                    maxLength={50}\n                    placeholder={t(\"enterAnswer\")}\n                  />\n                )}\n              </Tooltip>\n            </Form.Item>\n            <Form.Item {...tailFormItemLayout}>\n              <Button className=\"confirm-btn\" type=\"primary\" htmlType=\"submit\">\n                {t(\"Determine\")}\n              </Button>\n            </Form.Item>\n          </Form>\n\n          {this.state.visible && (\n            <Questions\n              wrappedComponentRef={this.saveFormRef}\n              visible={this.state.visible}\n              onCancel={this.handleCancel}\n              onCreate={this.handleCreate}\n              val={questionVal}\n            />\n          )}\n        </div>\n\n        {head_visible && (\n          <Headportrait\n            callback={this.headporId}\n            handleCancel={() => {\n              this.setState({ head_visible: false });\n            }}\n          />\n        )}\n\n        <div className=\"l-top\"></div>\n        <div className=\"l-bottom\"></div>\n      </div>\n    );\n  }\n}\n\nexport default Perfectinformation;\n","import React from 'react';\nimport Cropper from 'cropperjs'\nimport { withTranslation } from 'react-i18next';\nimport 'cropperjs/dist/cropper.css'\n\n@withTranslation()\nclass SelectProfilePic extends React.Component {\n  constructor(props) {\n    super(props);\n    this.image = React.createRef();\n    this.state = {\n      myCropper: null,\n      afterImg: ''\n    }\n  }\n\n  componentDidMount() {\n    let myCropper = new Cropper(this.image.current, {\n      viewMode: 1,\n      dragMode: 'none',\n      initialAspectRatio: 1,\n      aspectRatio: 1,\n      preview: '.before',\n      background: false,\n      autoCropArea: 0.6,\n      zoomOnWheel: false,\n    })\n    this.setState({\n      myCropper\n    }, () => {\n      this.state.myCropper.replace(this.props.img)\n    })\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    const { img } = props;\n    if (this.props.img !== img) {\n      this.state.myCropper.replace(img)\n    }\n  }\n  render() {\n    const { t, confirm, cancel } = this.props\n    return (\n      <div className='preview_picture'>\n        <div className='preview_left'>\n          <div className=\"show-img\">\n            <img src={this.props.img} ref={this.image} alt=\"\" />\n          </div>\n          <div className='preview_btn'>\n            <span className='confirm' onClick={() => { confirm(this.state.myCropper) }}>{t('Determine')}</span>\n            <span className='cancel' onClick={cancel}>{t('Cancel')}</span>\n          </div>\n        </div>\n        <div className='preview_right'>\n          <p>{t('imagePreview')}</p>\n          <div className=\"before\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SelectProfilePic;","import React from 'react';\nimport CryptoJS from 'crypto-js';\nimport { Icon, message } from 'antd';\nimport { withTranslation } from 'react-i18next';\nimport i18next from 'i18next';\nimport { wsget, host } from '../../ws';\nimport { ajaxPromise, dataURLtoBlob, getCookie } from '../../util/index';\nimport './style.scss';\nimport SelectProfilePic from './SelectProfilePic';\n\nfunction getBase64(img, callback) {\n  const reader = new FileReader();\n  reader.addEventListener('load', () => callback(reader.result));\n  reader.readAsDataURL(img);\n}\n\n@withTranslation()\nclass Headportrait extends React.Component {\n  constructor(props) {\n    super(props);\n    this.imageRef = React.createRef();\n    this.state = {\n      imageUrl: null\n    }\n  }\n\n  handleChange = (e) => {\n    if (e.target.files.length > 0) {\n      let file = e.target.files[0];\n      if (file.size / 1024 / 1024 > 3) {\n        message.error(i18next.t('Picsize'))\n        return;\n      }\n      getBase64(file, (imageUrl) => {\n        this.setState({ imageUrl, file })\n      })\n    }\n  }\n\n  handleCancel = () => {\n    this.props.handleCancel()\n  }\n\n  handleconfirm = (cropper) => {\n    this.props.handleCancel();\n    const key = 'portrait';\n    message.loading({ content: 'uploading...', key, duration: 0 });\n    const { file } = this.state\n    let afterimg = cropper.getCroppedCanvas({\n      imageSmoothingQuality: 'high'\n    }).toDataURL('image/jpeg');\n    let wordArray = CryptoJS.lib.WordArray.create(afterimg);\n    const hash = CryptoJS.SHA256(wordArray).toString();\n    let blob = dataURLtoBlob(afterimg);\n    ajaxPromise(blob, `${host()}/up/p/${getCookie('lovtok')}/${hash}/${file.name}`)\n      .then((result) => {\n        wsget('user_profile_id_save', result.id).then((res) => {\n          message.success({ content: 'succeed!', key, duration: 2 });\n          this.props.callback(null, result.id);\n        }).catch(() => {\n          message.error({ content: 'come to nothing', key, duration: 3 })\n        })\n      })\n  }\n\n  render() {\n    const { imageUrl } = this.state;\n    const { t, handleCancel } = this.props;\n\n    return (\n      <div className='Headportrait-wrap'>\n        <div className='Modify_the_picture'>\n          <span className='close-icon' onClick={handleCancel}>\n            <Icon type=\"close\" />\n          </span>\n          <div className='Modify_head'>\n            {t('Headimage')}\n          </div>\n          <div className='Modify_content'>\n            <p>{t('uploadavatar')}</p>\n            <div className=\"Modify_openimg\">\n              <input type=\"button\" className=\"pass-portrait-filebtn\" name=\"openImgBtn\" id=\"openImgBtn\" value={t('Choosepicture')} />\n              <input\n                type=\"file\"\n                className=\"pass-portrait-file\"\n                accept=\"image/bmp,image/jpeg,image/png\"\n                name=\"file\" id=\"fileImg\"\n                onChange={(e) => { this.handleChange(e) }} />\n              <span className=\"pass-portrait-msg\">{t('SupportPic')}</span>\n            </div>\n\n            {imageUrl && <SelectProfilePic\n              img={this.state.imageUrl}\n              confirm={this.handleconfirm}\n              cancel={this.handleCancel} />}\n\n          </div>\n        </div >\n      </div>\n    );\n  }\n}\nexport default Headportrait;"],"sourceRoot":""}