(this.webpackJsonplovcube=this.webpackJsonplovcube||[]).push([[22],{1099:function(e,t,a){"use strict";a.r(t);a(288);var n,r,s,l,c,o,i,m=a(171),p=(a(289),a(86)),u=a(100),d=(a(77),a(18)),f=a(9),b=a(12),w=a(20),g=a(21),E=a(22),h=a(0),v=a.n(h),N=a(34),x=a(37),k=a(6),y=a(790),_=(a(834),a(1090)),j=(a(76),a(10)),O=(a(169),a(99)),R=a(4),C=a(19),S=a(3),P=(a(63),a(1)),F=a(7),A=Object(N.b)()(n=Object(x.c)((r=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(w.a)(this,Object(g.a)(t).call(this,e)),Object(R.a)(a,"idx",s,Object(C.a)(a)),Object(R.a)(a,"name",l,Object(C.a)(a)),Object(R.a)(a,"question",c,Object(C.a)(a)),Object(R.a)(a,"answer",o,Object(C.a)(a)),a.next0=function(){var e=Object(k.u)(a.textRef.current.value);e?k.l.name.test(e)?(d.a.loading({content:a.t("Calibration"),key:"forgetpwd",duration:0}),Object(F.b)("user_back_password",e).then((function(e){d.a.success({content:a.t("enterAnswer"),key:"forgetpwd",duration:2}),a.name=e.name,a.question=e.pwd_question,a.idx=1,a.answerRef.current.focus()})).catch((function(){d.a.error(a.t("isCorrect"))}))):d.a.error(a.t("isCorrect")):d.a.error(a.t("enterName/mailbox"))},a.next1=function(){var e=Object(k.u)(a.answerRef.current.value);e?(d.a.loading({content:a.t("Calibration"),key:"forgetpwd",duration:0}),Object(F.b)("user_password_answer",{name:a.name,answer:e}).then((function(t){d.a.success({content:a.t("setnewPwd"),key:"forgetpwd",duration:2}),a.answer=e,a.idx=2})).catch((function(e){2===e.state&&d.a.error(a.t("WrongAnswer"))}))):d.a.error(a.t("enterAnswer"))},a.confirm=function(){var e=a.newpwdtRef.current.value,t=a.confirmpwdRef.current.value;if(k.l.pwd.test(e))if(e||t)if(e===t){var n={name:a.name,answer:a.answer,pwd:t};Object(F.b)("user_new_password",n,1).then((function(e){a.props.close()}))}else d.a.error(a.t("twoPwds"));else d.a.error(a.t("setnewPwd"));else d.a.error(a.t("pwdFormat"))},a.black1=function(){a.idx=0},a.black2=function(){a.idx=1},a.textRef=v.a.createRef(),a.answerRef=v.a.createRef(),a.newpwdtRef=v.a.createRef(),a.confirmpwdRef=v.a.createRef(),a.t=a.props.t,a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.idx;return v.a.createElement("div",{className:"forgetpwd-model"},v.a.createElement("div",{className:"forgetpwd-inner"},v.a.createElement("div",{className:"forgetpwd-content"},v.a.createElement("div",{className:"forgetpwd-bd"},v.a.createElement("span",{className:"close-icon",onClick:this.props.close},v.a.createElement(j.a,{type:"close"})),v.a.createElement("div",{className:"forgetpwd-head"},v.a.createElement("span",null,t("ResetPwd"))),v.a.createElement((function(){switch(a){case 0:return v.a.createElement("div",{className:"details"},v.a.createElement(m.a,{gutter:[0,16]},v.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},v.a.createElement("label",{className:"forgetpwd_label",htmlFor:"name"},t("name/mailbox")," :")),v.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},v.a.createElement("input",{id:"name",className:"forgetpwd_input",type:"text",autoFocus:"autoFocus",ref:e.textRef,placeholder:t("enterName/mailbox")})),v.a.createElement(p.a,{xs:{span:24}},v.a.createElement("span",{className:"next",onClick:e.next0},t("NextStep"))),v.a.createElement(p.a,{xs:{span:0}},v.a.createElement("span",{className:"black",style:{visibility:"hidden"}},t("PreviousStep")))));case 1:return v.a.createElement("div",{className:"details"},v.a.createElement(m.a,{gutter:[0,16]},v.a.createElement(p.a,{xs:{span:24},className:"user-name"},v.a.createElement("p",{className:"title"},t("UserName")),v.a.createElement("p",{className:"txt"},e.name)),v.a.createElement(p.a,{xs:{span:24},className:"user-question"},v.a.createElement("p",{className:"title"},t("Problem")),v.a.createElement("p",{className:"txt"},e.question)),v.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},v.a.createElement("label",{className:"forgetpwd_label",htmlFor:"answer"},t("Answer")," :")),v.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},v.a.createElement("input",{id:"answer",className:"forgetpwd_input",type:"text",autoFocus:"autoFocus",ref:e.answerRef,placeholder:t("enterAnswer")})),v.a.createElement(p.a,{xs:{span:24}},v.a.createElement("span",{className:"next",onClick:e.next1},t("NextStep"))),v.a.createElement(p.a,{xs:{span:24}},v.a.createElement("span",{className:"black",onClick:e.black1},t("PreviousStep")))));case 2:return v.a.createElement("div",{className:"details"},v.a.createElement(m.a,{gutter:[0,16]},v.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},v.a.createElement("label",{className:"forgetpwd_label",htmlFor:"new-pwd"},t("NewPwd")," :")),v.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},v.a.createElement(O.a,{placement:"topLeft",overlayClassName:"tooltip",trigger:"focus",title:t("pwdreg")},v.a.createElement("input",{id:"new-pwd",className:"forgetpwd_input",type:"password",ref:e.newpwdtRef,placeholder:t("enterNewpwd")}))),v.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},v.a.createElement("label",{className:"forgetpwd_label",htmlFor:"confirm-pwd"},t("ConfirmPwd")," :")),v.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},v.a.createElement("input",{id:"confirm-pwd",className:"forgetpwd_input",type:"password",ref:e.confirmpwdRef,placeholder:t("enterPwdAgain")})),v.a.createElement(p.a,{xs:{span:24}},v.a.createElement("span",{className:"next",onClick:e.confirm},t("Determine"))),v.a.createElement(p.a,{xs:{span:24}},v.a.createElement("span",{className:"black",onClick:e.black2},t("PreviousStep")))))}}),null)))))}}]),t}(h.Component),s=Object(S.a)(r.prototype,"idx",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=Object(S.a)(r.prototype,"name",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=Object(S.a)(r.prototype,"question",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=Object(S.a)(r.prototype,"answer",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n=r))||n)||n,D=a(297),q=a(147),L=Object(N.b)()(i=Object(x.b)("login","playlist","rahmen","photoalbum")(i=Object(x.c)(i=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(w.a)(this,Object(g.a)(t).call(this,e))).handleSubmit=function(){var e="login",t=Object(k.u)(a.userRef.current.value),n=Object(k.u)(a.pwdRef.current.value);if(""!==t&&""!==n)if(k.l.pwd.test(n)){d.a.loading({content:a.t("loading"),key:e,duration:0}),a.setState({disabl:!0});var r={name:t,pwd:n};a.props.login.login_in(r,(function(t){if(t)if(k.p.set("token",t.token),Object(k.q)("cookie",k.p.get("token"),0),k.r.set("user",Object(u.a)({},t,{},r)),k.r.set("Z_H_U_DATA",t),a.setState({disabl:!1}),d.a.success({content:a.t("LoginSucceed"),key:e,duration:2}),a.props.location.state){var n=a.props.location.state.from;a.props.history.push(n)}else a.props.history.push("/");else a.setState({disabl:!1}),d.a.error({content:a.t("LoginFailed"),key:e,duration:3})}));var s=Object(k.k)();s.isAndroid||s.isPhone?a.props.login.getos("phone"):s.isTablet?a.props.login.getos("tab"):s.isPc&&a.props.login.getos("pc")}else d.a.error({content:a.t("LoginFailed"),key:e,duration:3});else d.a.error(a.t("AccountPwdEmpty"))},a.keyhandleSubmit=function(e){e.preventDefault(),13===e.keyCode&&a.handleSubmit()},a.nextinput=function(e){e.preventDefault(),13===e.keyCode&&a.pwdRef.current.focus()},a.goRegister=function(){a.props.history.push("/register")},a.userRef=v.a.createRef(),a.pwdRef=v.a.createRef(),a.t=a.props.t,a.state={disabl:!1,pro_visible:!1,user_id:null,name:null,pwd:null,for_visible:!1},a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){k.r.remove("user"),k.r.remove("Z_H_U_DATA"),k.p.remove("token"),Object(k.m)("cookie"),this.props.login.clearData(),this.props.photoalbum.clearData(),this.props.rahmen.clearData(),this.props.playlist.clearData()}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.state,n=a.disabl,r=a.pro_visible,s=a.user_id,l=a.name,c=a.pwd,o=a.for_visible;return v.a.createElement("div",{className:"container"},v.a.createElement(D.a,{buyUrl:q.a,title:t("Signsmartframe")}),v.a.createElement("div",{className:"login-mod"},v.a.createElement("div",{className:"login-container"},v.a.createElement("div",{className:"login-box"},v.a.createElement("div",{className:"login-inner"},v.a.createElement("div",{className:"login-inner-head"},v.a.createElement("h2",null,t("login"))),v.a.createElement("div",{className:"login-content"},v.a.createElement(m.a,{gutter:[0,16]},v.a.createElement(p.a,{xs:{span:24},className:"login-item-name"},v.a.createElement("input",{spellCheck:!1,type:"text",maxLength:24,placeholder:t("name/mailbox"),ref:this.userRef,onKeyUp:this.nextinput})),v.a.createElement(p.a,{xs:{span:24},className:"login-item-pwd"},v.a.createElement("input",{type:"password",placeholder:t("Password"),maxLength:32,ref:this.pwdRef,onKeyUp:this.keyhandleSubmit})),v.a.createElement(p.a,{xs:{span:24}},v.a.createElement("p",{className:"login-forgetpwd"},v.a.createElement("span",{className:"forget-password",onClick:function(){e.setState({for_visible:!0})}},t("ForgetPwd")))),v.a.createElement(p.a,{xs:{span:24},className:"login-item-loginbtn"},v.a.createElement("button",{onClick:this.handleSubmit,style:n?{opacity:"0.5"}:{},disabled:!!n},t("login"))),v.a.createElement(p.a,{xs:{span:24},className:"login-item-regbtn"},v.a.createElement("button",{onClick:this.goRegister},t("Registered")))))),v.a.createElement(y.a,null)),v.a.createElement("div",{className:"l-top"}),v.a.createElement("div",{className:"l-middle"}),v.a.createElement("div",{className:"l-bottom"}))),r&&v.a.createElement(_.default,{user_id:s,name:l,pwd:c}),o&&v.a.createElement(A,{close:function(){e.setState({for_visible:!1})}}))}}]),t}(h.Component))||i)||i)||i;t.default=L},790:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(16),l=(a(210),a(294));t.a=function(){return r.a.createElement("div",{id:"Footer"},r.a.createElement("p",{className:"foot-copyright"},s.a.t("copyright").format(l.a.name,l.a.version)))}},834:function(e,t,a){}}]);
//# sourceMappingURL=22.bc0f0cf0.chunk.js.map