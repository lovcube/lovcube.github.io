(this.webpackJsonplovcube=this.webpackJsonplovcube||[]).push([[22],{1097:function(e,t,a){"use strict";a.r(t);a(291);var n,r,s,l,c,i,o,m=a(173),p=(a(292),a(86)),u=(a(80),a(23)),d=a(10),f=a(12),w=a(19),b=a(20),E=a(21),g=a(0),h=a.n(g),N=a(31),v=a(37),x=a(6),y=a(793),k=(a(836),a(1090)),j=(a(75),a(9)),O=(a(171),a(100)),_=a(4),R=a(17),C=a(3),S=(a(64),a(1)),P=a(7),F=Object(N.b)()(n=Object(v.c)((r=function(e){function t(e){var a;return Object(d.a)(this,t),a=Object(w.a)(this,Object(b.a)(t).call(this,e)),Object(_.a)(a,"idx",s,Object(R.a)(a)),Object(_.a)(a,"name",l,Object(R.a)(a)),Object(_.a)(a,"question",c,Object(R.a)(a)),Object(_.a)(a,"answer",i,Object(R.a)(a)),a.next0=function(){var e=Object(x.u)(a.textRef.current.value);e?x.l.name.test(e)?(u.a.loading({content:a.t("Calibration"),key:"forgetpwd",duration:0}),Object(P.c)("user_back_password",e).then((function(e){u.a.success({content:a.t("enterAnswer"),key:"forgetpwd",duration:2}),a.name=e.name,a.question=e.pwd_question,a.idx=1,a.answerRef.current.focus()})).catch((function(){u.a.error(a.t("isCorrect"))}))):u.a.error(a.t("isCorrect")):u.a.error(a.t("enterNameMailbox"))},a.next1=function(){var e=Object(x.u)(a.answerRef.current.value);e?(u.a.loading({content:a.t("Calibration"),key:"forgetpwd",duration:0}),Object(P.c)("user_password_answer",{name:a.name,answer:e}).then((function(t){u.a.success({content:a.t("setnewPwd"),key:"forgetpwd",duration:2}),a.answer=e,a.idx=2})).catch((function(e){2===e.state&&u.a.error(a.t("WrongAnswer"))}))):u.a.error(a.t("enterAnswer"))},a.confirm=function(){var e=a.newpwdtRef.current.value,t=a.confirmpwdRef.current.value;if(x.l.pwd.test(e))if(e||t)if(e===t){var n={name:a.name,answer:a.answer,pwd:t};Object(P.c)("user_new_password",n,1).then((function(e){a.props.close()}))}else u.a.error(a.t("twoPwds"));else u.a.error(a.t("setnewPwd"));else u.a.error(a.t("pwdFormat"))},a.black1=function(){a.idx=0},a.black2=function(){a.idx=1},a.textRef=h.a.createRef(),a.answerRef=h.a.createRef(),a.newpwdtRef=h.a.createRef(),a.confirmpwdRef=h.a.createRef(),a.t=a.props.t,a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.idx;return h.a.createElement("div",{className:"forgetpwd-model"},h.a.createElement("div",{className:"forgetpwd-inner"},h.a.createElement("div",{className:"forgetpwd-content"},h.a.createElement("div",{className:"forgetpwd-bd"},h.a.createElement("span",{className:"close-icon",onClick:this.props.close},h.a.createElement(j.a,{type:"close"})),h.a.createElement("div",{className:"forgetpwd-head"},h.a.createElement("span",null,t("ResetPwd"))),h.a.createElement((function(){switch(a){case 0:return h.a.createElement("div",{className:"details"},h.a.createElement(m.a,{gutter:[0,16]},h.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},h.a.createElement("label",{className:"forgetpwd_label",htmlFor:"name"},t("nameMailbox")," :")),h.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},h.a.createElement("input",{id:"name",className:"forgetpwd_input",type:"text",autoFocus:"autoFocus",ref:e.textRef,placeholder:t("enterNameMailbox")})),h.a.createElement(p.a,{xs:{span:24}},h.a.createElement("span",{className:"next",onClick:e.next0},t("NextStep"))),h.a.createElement(p.a,{xs:{span:0}},h.a.createElement("span",{className:"black",style:{visibility:"hidden"}},t("PreviousStep")))));case 1:return h.a.createElement("div",{className:"details"},h.a.createElement(m.a,{gutter:[0,16]},h.a.createElement(p.a,{xs:{span:24},className:"user-name"},h.a.createElement("p",{className:"title"},t("UserName")),h.a.createElement("p",{className:"txt"},e.name)),h.a.createElement(p.a,{xs:{span:24},className:"user-question"},h.a.createElement("p",{className:"title"},t("Problem")),h.a.createElement("p",{className:"txt"},e.question)),h.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},h.a.createElement("label",{className:"forgetpwd_label",htmlFor:"answer"},t("Answer")," :")),h.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},h.a.createElement("input",{id:"answer",className:"forgetpwd_input",type:"text",autoFocus:"autoFocus",ref:e.answerRef,placeholder:t("enterAnswer")})),h.a.createElement(p.a,{xs:{span:24}},h.a.createElement("span",{className:"next",onClick:e.next1},t("NextStep"))),h.a.createElement(p.a,{xs:{span:24}},h.a.createElement("span",{className:"black",onClick:e.black1},t("PreviousStep")))));case 2:return h.a.createElement("div",{className:"details"},h.a.createElement(m.a,{gutter:[0,16]},h.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},h.a.createElement("label",{className:"forgetpwd_label",htmlFor:"new-pwd"},t("NewPwd")," :")),h.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},h.a.createElement(O.a,{placement:"topLeft",overlayClassName:"tooltip",trigger:"focus",title:t("pwdreg")},h.a.createElement("input",{id:"new-pwd",className:"forgetpwd_input",type:"password",ref:e.newpwdtRef,placeholder:t("enterNewpwd")}))),h.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},h.a.createElement("label",{className:"forgetpwd_label",htmlFor:"confirm-pwd"},t("ConfirmPwd")," :")),h.a.createElement(p.a,{xs:{span:24},className:"forgetpwd_item"},h.a.createElement("input",{id:"confirm-pwd",className:"forgetpwd_input",type:"password",ref:e.confirmpwdRef,placeholder:t("enterPwdAgain")})),h.a.createElement(p.a,{xs:{span:24}},h.a.createElement("span",{className:"next",onClick:e.confirm},t("Determine"))),h.a.createElement(p.a,{xs:{span:24}},h.a.createElement("span",{className:"black",onClick:e.black2},t("PreviousStep")))))}}),null)))))}}]),t}(g.Component),s=Object(C.a)(r.prototype,"idx",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=Object(C.a)(r.prototype,"name",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=Object(C.a)(r.prototype,"question",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=Object(C.a)(r.prototype,"answer",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n=r))||n)||n,D=a(299),A=a(149),q=Object(N.b)()(o=Object(v.b)("login","playlist","rahmen","photoalbum")(o=Object(v.c)(o=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(w.a)(this,Object(b.a)(t).call(this,e))).handleSubmit=function(){var e="login",t=a.userRef.current.value.trim(),n=a.pwdRef.current.value.trim();if(""!==t&&""!==n)if(x.l.pwd.test(n)){u.a.loading({content:a.t("loading"),key:e,duration:0}),a.setState({disabl:!0});var r={name:t,pwd:n};a.props.login.login_in(r,(function(t){if(t)if(Object(x.p)("lovtok",t.token,0),a.setState({disabl:!1}),u.a.success({content:a.t("LoginSucceed"),key:e,duration:2}),a.props.location.state){var n=a.props.location.state.from;a.props.history.push(n)}else a.props.history.push("/");else a.setState({disabl:!1}),u.a.error({content:a.t("LoginFailed"),key:e,duration:3})}))}else u.a.error({content:a.t("LoginFailed"),key:e,duration:3});else u.a.error(a.t("AccountPwdEmpty"))},a.keyhandleSubmit=function(e){e.preventDefault(),13===e.keyCode&&a.handleSubmit()},a.nextinput=function(e){e.preventDefault(),13===e.keyCode&&a.pwdRef.current.focus()},a.goRegister=function(){a.props.history.push("/register")},a.userRef=h.a.createRef(),a.pwdRef=h.a.createRef(),a.t=a.props.t,a.state={disabl:!1,pro_visible:!1,user_id:null,name:null,pwd:null,for_visible:!1},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){x.r.remove("user"),Object(x.m)("lovtok"),this.props.login.clearData(),this.props.photoalbum.clearData(),this.props.rahmen.clearData(),this.props.playlist.clearData()}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.state,n=a.disabl,r=a.pro_visible,s=a.user_id,l=a.name,c=a.pwd,i=a.for_visible;return h.a.createElement("div",{className:"container"},h.a.createElement(D.a,{buyUrl:A.a,title:t("Signsmartframe")}),h.a.createElement("div",{className:"login-mod"},h.a.createElement("div",{className:"login-container"},h.a.createElement("div",{className:"login-box"},h.a.createElement("div",{className:"login-inner"},h.a.createElement("div",{className:"login-inner-head"},h.a.createElement("h2",null,t("login"))),h.a.createElement("div",{className:"login-content"},h.a.createElement(m.a,{gutter:[0,16]},h.a.createElement(p.a,{xs:{span:24},className:"login-item-name"},h.a.createElement("input",{spellCheck:!1,type:"text",maxLength:24,placeholder:t("nameMailbox"),ref:this.userRef,onKeyUp:this.nextinput})),h.a.createElement(p.a,{xs:{span:24},className:"login-item-pwd"},h.a.createElement("input",{type:"password",placeholder:t("Password"),maxLength:32,ref:this.pwdRef,onKeyUp:this.keyhandleSubmit})),h.a.createElement(p.a,{xs:{span:24}},h.a.createElement("p",{className:"login-forgetpwd"},h.a.createElement("span",{className:"forget-password",onClick:function(){e.setState({for_visible:!0})}},t("ForgetPwd")))),h.a.createElement(p.a,{xs:{span:24},className:"login-item-loginbtn"},h.a.createElement("button",{onClick:this.handleSubmit,style:n?{opacity:"0.5"}:{},disabled:!!n},t("login"))),h.a.createElement(p.a,{xs:{span:24},className:"login-item-regbtn"},h.a.createElement("button",{onClick:this.goRegister},t("Registered")))))),h.a.createElement(y.a,null)),h.a.createElement("div",{className:"l-top"}),h.a.createElement("div",{className:"l-middle"}),h.a.createElement("div",{className:"l-bottom"}))),r&&h.a.createElement(k.default,{user_id:s,name:l,pwd:c}),i&&h.a.createElement(F,{close:function(){e.setState({for_visible:!1})}}))}}]),t}(g.Component))||o)||o)||o;t.default=q},793:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(15),l=(a(212),a(109));t.a=function(){return r.a.createElement("div",{id:"Footer"},r.a.createElement("p",{className:"foot-copyright"},s.a.t("copyright").format(l.a.name,l.a.version)))}},836:function(e,t,a){}}]);
//# sourceMappingURL=22.318125a9.chunk.js.map