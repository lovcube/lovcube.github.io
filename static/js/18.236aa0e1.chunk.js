(this.webpackJsonpframeweb=this.webpackJsonpframeweb||[]).push([[18],{733:function(e,t,a){"use strict";a(72);var n,i=a(13),l=(a(64),a(17)),r=a(8),c=a(10),s=a(21),o=a(22),m=a(23),u=a(0),d=a.n(u),h=a(36),p=(a(188),a(6)),f=Object(h.b)()(n=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(o.a)(t).call(this,e))).handleChange=function(e){a.setState({value:e.target.value})},a.handleOK=function(){var e=Object(p.t)(a.state.value);""!==e?a.props.handleconfirm(e):l.a.error(a.props.t("enterName"))},a.inputRef=d.a.createRef(),a.state={value:a.props.defaultValue,name:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.t,a=e.title,n=e.handlecancel;return d.a.createElement("div",{className:"custom-modal"},d.a.createElement("div",{className:"modal-warp"},d.a.createElement("div",{className:"modal-warp-header"},d.a.createElement("h3",null,a),d.a.createElement("span",{onClick:n},d.a.createElement(i.a,{type:"close"}))),d.a.createElement("div",{className:"modal-warp-boby"},d.a.createElement("div",{className:"modal-warp-input"},d.a.createElement("input",{ref:this.inputRef,maxLength:50,autoFocus:!0,spellCheck:!1,type:"text",value:this.state.value,onChange:this.handleChange})),d.a.createElement("div",{className:"modal-warp-handle"},d.a.createElement("span",{className:"cancel-btn",onClick:n},t("Cancel")),d.a.createElement("span",{className:"confirm-btn",onClick:this.handleOK},t("Determine"))))))}}]),t}(u.Component))||n;t.a=f},734:function(e,t,a){"use strict";a(72);var n,i=a(13),l=a(8),r=a(10),c=a(21),s=a(22),o=a(23),m=a(0),u=a.n(m),d=a(36),h=(a(188),Object(d.b)()(n=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).inputRef=u.a.createRef(),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.title,n=e.text,l=e.custom,r=e.handlecancel,c=e.handleconfirm;return u.a.createElement("div",{className:"delete-modal"},u.a.createElement("div",{className:"modal-warp"},u.a.createElement("div",{className:"modal-warp-header"},u.a.createElement("h3",null,a),u.a.createElement("span",{onClick:r},u.a.createElement(i.a,{type:"close"}))),u.a.createElement("div",{className:"modal-warp-boby"},u.a.createElement("div",{className:"modal-warp-text"},u.a.createElement("p",{className:"subtitle"},t("deleteTheSelected"),n,"\uff1f"),u.a.createElement("p",{className:"warning"},t("modalWarning"),n,t("CarefulOperation")),u.a.createElement("p",{className:"warning"},l&&l)),u.a.createElement("div",{className:"modal-warp-handle"},u.a.createElement("span",{className:"cancel-btn",onClick:r},t("Cancel")),u.a.createElement("span",{className:"confirm-btn",onClick:c},t("Determine"))))))}}]),t}(m.Component))||n);t.a=h},977:function(e,t,a){},995:function(e,t,a){"use strict";a.r(t);a(72);var n,i,l,r,c,s,o,m,u,d,h,p,f,b,v,E,g,N,O=a(13),j=(a(187),a(117)),y=(a(64),a(17)),k=a(4),w=a(8),_=a(10),C=a(21),R=a(22),x=a(18),S=a(23),z=a(2),D=(a(53),a(0)),L=a.n(D),A=a(39),U=a(36),I=a(6),W=(a(977),a(264)),q=a(263),F=a(1),M=a(733),P=a(734),V=a(750),H=a.n(V),J=(a(751),Object(U.b)()(n=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(C.a)(this,Object(R.a)(t).call(this,e))).image=L.a.createRef(),a.state={myCropper:null,afterImg:""},a}return Object(S.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new H.a(this.image.current,{viewMode:1,dragMode:"none",aspectRatio:.7,preview:".before",background:!1,autoCropArea:.6,zoomOnWheel:!1});this.setState({myCropper:t},(function(){e.state.myCropper.replace(e.props.img)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.confirm,i=t.cancel;return L.a.createElement("div",{className:"cover-Mask"},L.a.createElement("div",{className:"cover-inner"},L.a.createElement("div",{className:"preview_picture"},L.a.createElement("div",{className:"preview_left"},L.a.createElement("div",{className:"show-img"},L.a.createElement("img",{src:this.props.img,ref:this.image,alt:""})),L.a.createElement("div",{className:"preview_btn"},L.a.createElement("span",{className:"confirm",onClick:function(){n(e.state.myCropper)}},a("Determine")),L.a.createElement("span",{className:"cancel",onClick:i},a("Cancel")))),L.a.createElement("div",{className:"preview_right"},L.a.createElement("p",null,a("imagePreview")),L.a.createElement("div",{className:"before"})))))}}]),t}(L.a.Component))||n),K=a(12);var B=Object(U.b)()(i=Object(A.b)("rahmen","login")(i=Object(A.c)((l=function(e){function t(e){var a;return Object(w.a)(this,t),a=Object(C.a)(this,Object(R.a)(t).call(this,e)),Object(k.a)(a,"sortList",r,Object(x.a)(a)),Object(k.a)(a,"defaultSort",c,Object(x.a)(a)),Object(k.a)(a,"init",s,Object(x.a)(a)),Object(k.a)(a,"sortindex",o,Object(x.a)(a)),Object(k.a)(a,"isdes",m,Object(x.a)(a)),Object(k.a)(a,"checkAll",u,Object(x.a)(a)),Object(k.a)(a,"deleteNode",d,Object(x.a)(a)),Object(k.a)(a,"menuDisplayId",h,Object(x.a)(a)),Object(k.a)(a,"rename",p,Object(x.a)(a)),Object(k.a)(a,"renameNode",f,Object(x.a)(a)),Object(k.a)(a,"ren_defaultValue",b,Object(x.a)(a)),Object(k.a)(a,"del_visible",v,Object(x.a)(a)),Object(k.a)(a,"imageUrl",E,Object(x.a)(a)),Object(k.a)(a,"upFramsid",g,Object(x.a)(a)),Object(k.a)(a,"sortDis",N,Object(x.a)(a)),a.getWH=function(){a.props.rahmen.resize(a.boxRef.current.offsetWidth,a.props.rahmen.rahmenList)},a.hide=function(e){e.target&&"svg"===e.target.nodeName||(a.menuDisplayId=null)},a.sorthide=function(e){a.sortDis=!1},a.more_show=function(e,t){e.stopPropagation(),a.menuDisplayId?a.menuDisplayId=null:a.menuDisplayId=t},a.checkAllfn=function(){a.checkAll=!a.checkAll,a.props.rahmen.checkAllrahmenList(a.checkAll)},a.renamefn=function(e,t,n){e.stopPropagation(),a.rename=!0,a.renameNode=t,a.ren_defaultValue=n},a.ren_handleconfirm=function(e){a.props.rahmen.rename_rename(a.renameNode,e),a.rename=!1,a.renameNode=null},a.ren_handlecancel=function(){a.rename=!1,a.renameNode=null},a.del_handleconfirm=function(){a.props.rahmen.renameDelete(a.deleteNode),a.del_visible=!1,a.checkAll=!1,a.deleteNode=null},a.del_handlecancel=function(){a.del_visible=!1,a.deleteNode=null},a.maskshow=function(e){e.stopPropagation()},a.uploading=function(e,t){if(e.target.files.length>0){var n=e.target.files[0];if(n.size/1024/1024>10)return void y.a.error(a.props.t("picturemaximum"));!function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(n,(function(e){a.imageUrl=e,a.file=n,a.upFramsid=t}))}},a.up_handleCancel=function(){a.imageUrl=null,a.upFramsid=null,a.fileRef.current.value=null},a.up_handleconfirm=function(e){a.props.rahmen.uploadCover(e,a.file,a.upFramsid,(function(){a.props.rahmen.rahmen_init(null,a.sortindex,a.isdes,a.boxRef.current.offsetWidth)}),(function(){a.fileRef.current.value=null})),a.imageUrl=null},a.renameRef=L.a.createRef(),a.boxRef=L.a.createRef(),a.fileRef=L.a.createRef(),a}return Object(S.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={},a=I.q.get("RahmenSort"),n=I.q.get("RahmenSort_isdes");a||0===a?(t=this.sortList[a],this.sortindex=a):(I.q.set("RahmenSort",0),t=this.sortList[0]),this.defaultSort=t,this.isdes=n||!1,this.props.rahmen.init(!0),this.props.rahmen.rahmen_init(null,I.q.get("RahmenSort"),this.isdes,this.boxRef.current.offsetWidth),document.addEventListener("click",this.hide),document.addEventListener("click",this.sorthide),window.addEventListener("resize",this.getWH),this.updata_frames=K.a.on("updata_frames",(function(){e.props.rahmen.rahmen_init(null,I.q.get("RahmenSort"),e.isdes,e.boxRef.current.offsetWidth)})),this.addframes=K.a.on("add_frames",(function(){e.props.rahmen.rahmen_init(null,I.q.get("RahmenSort"),e.isdes,e.boxRef.current.offsetWidth)})),this.wsinit=K.a.on("wsinit",(function(t){1===t&&e.props.rahmen.rahmen_init(null,I.q.get("RahmenSort"),e.isdes,e.boxRef.current.offsetWidth)}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hide),document.removeEventListener("click",this.sorthide),window.removeEventListener("resize",this.getWH),K.a.rm(this.wsinit),K.a.rm(this.addframes),K.a.rm(this.updata_frames),this.props.rahmen.init(!1)}},{key:"sortEldis",value:function(e){e.nativeEvent.stopImmediatePropagation(),this.sortDis=!this.sortDis}},{key:"changeIndex",value:function(e){I.q.set("RahmenSort",e),this.sortindex===e?(this.isdes=!this.isdes,I.q.set("RahmenSort_isdes",this.isdes)):(this.sortindex=e,I.q.set("RahmenSort_isdes",this.isdes)),this.defaultSort=this.sortList[e],this.props.rahmen.rahmen_sort(e,this.isdes)}},{key:"delete",value:function(e,t){e.stopPropagation(),this.del_visible=!0,t&&(this.deleteNode=[t])}},{key:"goRahmendetails",value:function(e,t,a,n,i){this.props.rahmen.goUrl({name:t,bindtime:a,is_admin:n,serial:i}),this.props.history.push("/rahmen/rahmendetails/".concat(e))}},{key:"render",value:function(){var e,t=this,a=this.props.t,n=this.props.login.OS,i=this.sortList,l=this.defaultSort,r=this.isdes,c=this.menuDisplayId,s=this.rename,o=this.ren_defaultValue,m=this.del_visible,u=this.imageUrl,d=this.sortDis,h=this.props.rahmen,p=h.firstInit,f=h.rahmenList,b=h.bindframevisibleshow,v=h.pitchOn,E=h.removerahmenList,g=h.invert;e=p?f.length>0?f.map((function(e){return L.a.createElement("div",{className:"list",key:e.node,style:{width:e.w,height:e.h}},L.a.createElement("div",{className:"rahmen-list ".concat(Object(F.h)(e,"check")?"rahmen-list-check":null),onClick:function(a){t.goRahmendetails(e.node,e.name,e.bindtime,e.is_admin,e.serial)}},L.a.createElement("span",{style:"tab"===n?{visibility:"inherit"}:{},className:"icon-check-s treeNodeUnselectable",onClick:function(a){v(a,e.node,(function(){t.checkAll=!0}),(function(){t.checkAll=!1}))}},L.a.createElement("i",{className:"iconfont",style:Object(F.h)(e,"check")?{}:{visibility:"hidden"}},"\ue62d")),L.a.createElement("div",{className:"rahmen-cover"},L.a.createElement("div",{className:"cover-img"},L.a.createElement("span",{className:"back-img",style:e.profile?{background:'url("'.concat(I.h.file_s(e.profile.id),'") no-repeat'),backgroundSize:"100% 100%"}:{}}))),L.a.createElement("div",{className:"rahmen-name-series"},L.a.createElement("p",{className:"name_info ellipsis"},L.a.createElement(j.a,{placement:"bottom",overlayClassName:"tooltip",title:Object(F.h)(e,"name")},L.a.createElement("span",{className:"name ellipsis"},e.name)),L.a.createElement("span",{className:"admin",style:e.is_admin?{visibility:"initial"}:{visibility:"hidden"}},a("Admin"))),L.a.createElement("p",{className:"series"},"SN : ",Object(I.r)(e.serial)," ")),L.a.createElement("div",{className:"rahmen-list-more treeNodeUnselectable",onClick:function(a){t.more_show(a,e.node)}},L.a.createElement("div",{className:"more-box"},L.a.createElement("span",null,L.a.createElement(O.a,{type:"ellipsis"})),L.a.createElement("div",{className:"more-menu",style:c===e.node?{}:{display:"none"}},L.a.createElement("ul",null,L.a.createElement("li",{className:"upfile",onClick:t.maskshow},L.a.createElement("span",null,L.a.createElement(O.a,{type:"picture"}),a("Replacecover")),L.a.createElement("input",{type:"file",ref:t.fileRef,title:"",accept:"image/jpg,image/bmp,image/jpeg,image/png",onChange:function(a){t.uploading(a,e.node)}})),L.a.createElement("li",{onClick:function(a){t.renamefn(a,e.node,e.name)}},L.a.createElement("span",null,L.a.createElement(O.a,{type:"edit",theme:"filled"}),a("rename"))),L.a.createElement("li",{onClick:function(a){t.delete(a,e.node)}},L.a.createElement("span",null,L.a.createElement(O.a,{type:"delete",theme:"filled"}),a("delete")))))))))})):L.a.createElement(q.a,null):L.a.createElement(W.a,null);var N=0;return E.forEach((function(e){e.true||(N+=1)})),L.a.createElement("div",{className:"rahmen-content"},L.a.createElement("div",{className:"new-rahmen"},L.a.createElement("div",{className:"new-rahmen-btn"},L.a.createElement("button",{onClick:b},a("BindingFrame"))),L.a.createElement("div",{className:"rahmen-num"},L.a.createElement("div",{className:"rahmen-num-icon"},L.a.createElement("i",{className:"iconfont"},"\ue784")),L.a.createElement("div",{className:"num-text"},L.a.createElement("p",{className:"text"},a("photoframe")),L.a.createElement("p",{className:"num"},f.length)))),L.a.createElement("div",{className:"rahmen-operation"},L.a.createElement("div",{className:"checkAll"},L.a.createElement("i",{className:"iconfont check-rahmen treeNodeUnselectable ".concat(f.length===E.length&&f.length>0?"icon-xuanzhong1":"icon-weixuanzhong"),onClick:this.checkAllfn}),L.a.createElement("span",{className:"checkAll-text"},N>0?"".concat(a("Selected")," ").concat(N," ").concat(a("frame")):a("Allelection")),E.length>0&&L.a.createElement("span",{onClick:g,className:"invert-Selection"},a("Reverseselection"))),L.a.createElement("div",{className:"rahmen-sort treeNodeUnselectable"},L.a.createElement("span",{className:"sort",onClick:function(e){t.sortEldis(e)}},a(l.text),r?L.a.createElement(O.a,{type:"arrow-up"}):L.a.createElement(O.a,{type:"arrow-down"})),L.a.createElement("div",{className:"sort-list",style:d?{display:"block"}:{display:"none"}},L.a.createElement("ul",null,i.map((function(e,n){return L.a.createElement("li",{key:e.id,onClick:function(){t.changeIndex(n)}},L.a.createElement("span",null,L.a.createElement(O.a,{type:"check",className:e.id===l.id?"check-icon":null}),a(e.text)))}))))),L.a.createElement("div",{className:"rahmen-delete",style:E.length>0?null:{visibility:"hidden"}},L.a.createElement("span",{onClick:function(e){t.delete(e)}},L.a.createElement(O.a,{type:"delete"}),a("delete")))),L.a.createElement("div",{ref:this.boxRef,className:"rahmen-main"},e),s?L.a.createElement(M.a,{title:a("rename"),defaultValue:o,handlecancel:this.ren_handlecancel,handleconfirm:this.ren_handleconfirm}):null,m?L.a.createElement(P.a,{title:a("Deleteconfirm"),text:a("frame"),handlecancel:this.del_handlecancel,handleconfirm:this.del_handleconfirm}):null,u&&L.a.createElement(J,{img:this.imageUrl,confirm:this.up_handleconfirm,cancel:this.up_handleCancel}))}}]),t}(L.a.Component),r=Object(z.a)(l.prototype,"sortList",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{id:1,text:"bindingSort",descending:!0},{id:2,text:"nameSort",descending:!0}]}}),c=Object(z.a)(l.prototype,"defaultSort",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=Object(z.a)(l.prototype,"init",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=Object(z.a)(l.prototype,"sortindex",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=Object(z.a)(l.prototype,"isdes",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(z.a)(l.prototype,"checkAll",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(z.a)(l.prototype,"deleteNode",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=Object(z.a)(l.prototype,"menuDisplayId",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=Object(z.a)(l.prototype,"rename",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=Object(z.a)(l.prototype,"renameNode",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(z.a)(l.prototype,"ren_defaultValue",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(z.a)(l.prototype,"del_visible",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=Object(z.a)(l.prototype,"imageUrl",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=Object(z.a)(l.prototype,"upFramsid",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=Object(z.a)(l.prototype,"sortDis",[F.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=l))||i)||i)||i;t.default=B}}]);
//# sourceMappingURL=18.236aa0e1.chunk.js.map