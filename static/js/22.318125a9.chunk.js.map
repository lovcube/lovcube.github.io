{"version":3,"sources":["page/Login/Forgetpwd.js","page/Login/index.js","common/Widget/Footer.js"],"names":["Forgetpwd","withTranslation","observer","props","next0","val","trim","textRef","current","value","reg","name","test","message","loading","content","t","key","duration","wsget","then","data","success","question","pwd_question","idx","answerRef","focus","catch","error","next1","answer","res","state","confirm","pwd1","newpwdtRef","pwd2","confirmpwdRef","pwd","close","black1","black2","React","createRef","this","className","onClick","type","gutter","xs","span","htmlFor","id","autoFocus","ref","placeholder","style","visibility","placement","overlayClassName","trigger","title","Component","observable","Login","inject","handleSubmit","userRef","pwdRef","setState","disabl","login","login_in","setCookie","token","location","path","from","history","push","keyhandleSubmit","event","preventDefault","keyCode","nextinput","goRegister","pro_visible","user_id","for_visible","storage","remove","removeCookie","clearData","photoalbum","rahmen","playlist","Header","buyUrl","spellCheck","maxLength","onKeyUp","opacity","disabled","Footer","Perfectinformation","i18next","format","config","version"],"mappings":"wWA0QeA,EA/PdC,a,GACAC,a,cAEC,WAAYC,GAAQ,IAAD,6BACjB,4CAAMA,IADW,mKAkBnBC,MAAQ,WACN,IAAMC,EAAMC,YAAK,EAAKC,QAAQC,QAAQC,OACjCJ,EAIAK,IAAIC,KAAKC,KAAKP,IAInBQ,EAAA,EAAQC,QAAQ,CAAEC,QAAS,EAAKC,EAAE,eAAgBC,IAjC1C,YAiC+CC,SAAU,IACjEC,YAAM,qBAAsBd,GACzBe,MAAK,SAACC,GACLR,EAAA,EAAQS,QAAQ,CAAEP,QAAS,EAAKC,EAAE,eAAgBC,IApC9C,YAoCmDC,SAAU,IACjE,EAAKP,KAAOU,EAAKV,KACjB,EAAKY,SAAWF,EAAKG,aACrB,EAAKC,IAAM,EACX,EAAKC,UAAUlB,QAAQmB,WAExBC,OAAM,WACLf,EAAA,EAAQgB,MAAM,EAAKb,EAAE,kBAbvBH,EAAA,EAAQgB,MAAM,EAAKb,EAAE,cAJrBH,EAAA,EAAQgB,MAAM,EAAKb,EAAE,sBArBN,EA0CnBc,MAAQ,WACN,IAAMzB,EAAMC,YAAK,EAAKoB,UAAUlB,QAAQC,OACnCJ,GAILQ,EAAA,EAAQC,QAAQ,CAAEC,QAAS,EAAKC,EAAE,eAAgBC,IArD1C,YAqD+CC,SAAU,IACjEC,YAAM,uBAAwB,CAAER,KAAM,EAAKA,KAAMoB,OAAQ1B,IACtDe,MAAK,SAACC,GACLR,EAAA,EAAQS,QAAQ,CAAEP,QAAS,EAAKC,EAAE,aAAcC,IAxD5C,YAwDiDC,SAAU,IAC/D,EAAKa,OAAS1B,EACd,EAAKoB,IAAM,KAEZG,OAAM,SAACI,GACY,IAAdA,EAAIC,OACNpB,EAAA,EAAQgB,MAAM,EAAKb,EAAE,oBAZzBH,EAAA,EAAQgB,MAAM,EAAKb,EAAE,iBA7CN,EA8DnBkB,QAAU,WACR,IAAMC,EAAO,EAAKC,WAAW5B,QAAQC,MAC/B4B,EAAO,EAAKC,cAAc9B,QAAQC,MACxC,GAAKC,IAAI6B,IAAI3B,KAAKuB,GAIlB,GAAKA,GAASE,EAId,GAAIF,IAASE,EAAb,CAIA,IAAMhB,EAAO,CACXV,KAAM,EAAKA,KACXoB,OAAQ,EAAKA,OACbQ,IAAKF,GAEPlB,YAAM,oBAAqBE,EAAM,GAAGD,MAAK,SAACY,GACxC,EAAK7B,MAAMqC,gBATX3B,EAAA,EAAQgB,MAAM,EAAKb,EAAE,iBAJrBH,EAAA,EAAQgB,MAAM,EAAKb,EAAE,mBAJrBH,EAAA,EAAQgB,MAAM,EAAKb,EAAE,eAlEN,EAuFnByB,OAAS,WACP,EAAKhB,IAAM,GAxFM,EA2FnBiB,OAAS,WACP,EAAKjB,IAAM,GA1FX,EAAKlB,QAAUoC,IAAMC,YACrB,EAAKlB,UAAYiB,IAAMC,YACvB,EAAKR,WAAaO,IAAMC,YACxB,EAAKN,cAAgBK,IAAMC,YAC3B,EAAK5B,EAAI,EAAKb,MAAMa,EANH,E,mHA+FT,IAAD,OACCA,EAAM6B,KAAK1C,MAAXa,EACAS,EAAQoB,KAARpB,IAuIR,OACE,yBAAKqB,UAAU,mBACb,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,gBACb,0BAAMA,UAAU,aAAaC,QAASF,KAAK1C,MAAMqC,OAC/C,uBAAMQ,KAAK,WAEb,yBAAKF,UAAU,kBACb,8BAAO9B,EAAE,cAEX,mBAjJC,WACT,OAAQS,GACN,KAAK,EACH,OACE,yBAAKqB,UAAU,WACb,uBAAKG,OAAQ,CAAC,EAAG,KACf,uBAAKC,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,2BAAOA,UAAU,kBAAkBM,QAAQ,QACxCpC,EAAE,eADL,OAIF,uBAAKkC,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,2BACEO,GAAG,OACHP,UAAU,kBACVE,KAAK,OACLM,UAAU,YACVC,IAAK,EAAKhD,QACViD,YAAaxC,EAAE,uBAGnB,uBAAKkC,GAAI,CAAEC,KAAM,KACf,0BAAML,UAAU,OAAOC,QAAS,EAAK3C,OAClCY,EAAE,cAGP,uBAAKkC,GAAI,CAAEC,KAAM,IACf,0BAAML,UAAU,QAAQW,MAAO,CAAEC,WAAY,WAC1C1C,EAAE,oBAOf,KAAK,EACH,OACE,yBAAK8B,UAAU,WACb,uBAAKG,OAAQ,CAAC,EAAG,KACf,uBAAKC,GAAI,CAAEC,KAAM,IAAML,UAAU,aAC/B,uBAAGA,UAAU,SAAS9B,EAAE,aACxB,uBAAG8B,UAAU,OAAO,EAAKnC,OAE3B,uBAAKuC,GAAI,CAAEC,KAAM,IAAML,UAAU,iBAC/B,uBAAGA,UAAU,SAAS9B,EAAE,YACxB,uBAAG8B,UAAU,OAAO,EAAKvB,WAE3B,uBAAK2B,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,2BAAOA,UAAU,kBAAkBM,QAAQ,UACxCpC,EAAE,UADL,OAIF,uBAAKkC,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,2BACEO,GAAG,SACHP,UAAU,kBACVE,KAAK,OACLM,UAAU,YACVC,IAAK,EAAK7B,UACV8B,YAAaxC,EAAE,kBAGnB,uBAAKkC,GAAI,CAAEC,KAAM,KACf,0BAAML,UAAU,OAAOC,QAAS,EAAKjB,OAClCd,EAAE,cAGP,uBAAKkC,GAAI,CAAEC,KAAM,KACf,0BAAML,UAAU,QAAQC,QAAS,EAAKN,QACnCzB,EAAE,oBAOf,KAAK,EACH,OACE,yBAAK8B,UAAU,WACb,uBAAKG,OAAQ,CAAC,EAAG,KACf,uBAAKC,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,2BAAOA,UAAU,kBAAkBM,QAAQ,WACxCpC,EAAE,UADL,OAIF,uBAAKkC,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,uBACEa,UAAU,UACVC,iBAAiB,UACjBC,QAAQ,QACRC,MAAO9C,EAAE,WAET,2BACEqC,GAAG,UACHP,UAAU,kBACVE,KAAK,WACLO,IAAK,EAAKnB,WACVoB,YAAaxC,EAAE,mBAIrB,uBAAKkC,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,2BAAOA,UAAU,kBAAkBM,QAAQ,eACxCpC,EAAE,cADL,OAIF,uBAAKkC,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,2BACEO,GAAG,cACHP,UAAU,kBACVE,KAAK,WACLO,IAAK,EAAKjB,cACVkB,YAAaxC,EAAE,oBAGnB,uBAAKkC,GAAI,CAAEC,KAAM,KACf,0BAAML,UAAU,OAAOC,QAAS,EAAKb,SAClClB,EAAE,eAGP,uBAAKkC,GAAI,CAAEC,KAAM,KACf,0BAAML,UAAU,QAAQC,QAAS,EAAKL,QACnC1B,EAAE,uBAuBT,c,GApPU+C,a,iCAUrBC,K,yEAAiB,K,kCACjBA,K,wEAAkB,M,sCAClBA,K,wEAAsB,M,oCACtBA,K,wEAAoB,M,+BCVjBC,EAHLhE,a,GACAiE,YAAO,QAAS,WAAY,SAAU,a,GACtChE,Y,cAEC,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KAuBRgE,aAAe,WACb,IAAMlD,EAAM,QACRN,EAAO,EAAKyD,QAAQ5D,QAAQC,MAAMH,OAClCiC,EAAM,EAAK8B,OAAO7D,QAAQC,MAAMH,OACpC,GAAa,KAATK,GAAuB,KAAR4B,EAInB,GAAK7B,IAAI6B,IAAI3B,KAAK2B,GAAlB,CAIA1B,EAAA,EAAQC,QAAQ,CAAEC,QAAS,EAAKC,EAAE,WAAYC,MAAKC,SAAU,IAC7D,EAAKoD,SAAS,CAAEC,QAAQ,IACxB,IAAMlD,EAAO,CACXV,OACA4B,OAGF,EAAKpC,MAAMqE,MAAMC,SAASpD,GAAM,SAACW,GAC/B,GAAIA,EAIF,GAHA0C,YAAU,SAAU1C,EAAI2C,MAAO,GAC/B,EAAKL,SAAS,CAAEC,QAAQ,IACxB1D,EAAA,EAAQS,QAAQ,CAAEP,QAAS,EAAKC,EAAE,gBAAiBC,MAAKC,SAAU,IAC9D,EAAKf,MAAMyE,SAAS3C,MAAO,CAC7B,IAAM4C,EAAO,EAAK1E,MAAMyE,SAAS3C,MAAM6C,KACvC,EAAK3E,MAAM4E,QAAQC,KAAKH,QAExB,EAAK1E,MAAM4E,QAAQC,KAAK,UAG1B,EAAKV,SAAS,CAAEC,QAAQ,IACxB1D,EAAA,EAAQgB,MAAM,CAAEd,QAAS,EAAKC,EAAE,eAAgBC,MAAKC,SAAU,YAvBjEL,EAAA,EAAQgB,MAAM,CAAEd,QAAS,EAAKC,EAAE,eAAgBC,MAAKC,SAAU,SAJ/DL,EAAA,EAAQgB,MAAM,EAAKb,EAAE,qBA7BN,EA8DnBiE,gBAAkB,SAACC,GACjBA,EAAMC,iBACgB,KAAlBD,EAAME,SACR,EAAKjB,gBAjEU,EAqEnBkB,UAAY,SAACH,GACXA,EAAMC,iBACgB,KAAlBD,EAAME,SACR,EAAKf,OAAO7D,QAAQmB,SAxEL,EA4EnB2D,WAAa,WACX,EAAKnF,MAAM4E,QAAQC,KAAK,cA3ExB,EAAKZ,QAAUzB,IAAMC,YACrB,EAAKyB,OAAS1B,IAAMC,YACpB,EAAK5B,EAAI,EAAKb,MAAMa,EACpB,EAAKiB,MAAQ,CACXsC,QAAQ,EACRgB,aAAa,EACbC,QAAS,KACT7E,KAAM,KACN4B,IAAK,KACLkD,aAAa,GAXE,E,iFAgBjBC,IAAQC,OAAO,QACfC,YAAa,UACb/C,KAAK1C,MAAMqE,MAAMqB,YACjBhD,KAAK1C,MAAM2F,WAAWD,YACtBhD,KAAK1C,MAAM4F,OAAOF,YAClBhD,KAAK1C,MAAM6F,SAASH,c,+BA2DZ,IAAD,OACC7E,EAAM6B,KAAK1C,MAAXa,EADD,EAE0D6B,KAAKZ,MAA9DsC,EAFD,EAECA,OAAQgB,EAFT,EAESA,YAAaC,EAFtB,EAEsBA,QAAS7E,EAF/B,EAE+BA,KAAM4B,EAFrC,EAEqCA,IAAKkD,EAF1C,EAE0CA,YAEjD,OACE,yBAAK3C,UAAU,aACb,kBAACmD,EAAA,EAAD,CAAQC,OAAQA,IAAQpC,MAAO9C,EAAE,oBACjC,yBAAK8B,UAAU,aACb,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,eACb,yBAAKA,UAAU,oBACb,4BAAK9B,EAAE,WAET,yBAAK8B,UAAU,iBACb,uBAAKG,OAAQ,CAAC,EAAG,KACf,uBAAKC,GAAI,CAAEC,KAAM,IAAML,UAAU,mBAC/B,2BACEqD,YAAY,EACZnD,KAAK,OACLoD,UAAW,GACX5C,YAAaxC,EAAE,eACfuC,IAAKV,KAAKuB,QACViC,QAASxD,KAAKwC,aAGlB,uBAAKnC,GAAI,CAAEC,KAAM,IAAML,UAAU,kBAC/B,2BACEE,KAAK,WACLQ,YAAaxC,EAAE,YACfoF,UAAW,GACX7C,IAAKV,KAAKwB,OACVgC,QAASxD,KAAKoC,mBAGlB,uBAAK/B,GAAI,CAAEC,KAAM,KACf,uBAAGL,UAAU,mBACX,0BACEA,UAAU,kBACVC,QAAS,WACP,EAAKuB,SAAS,CAAEmB,aAAa,MAG9BzE,EAAE,gBAIT,uBAAKkC,GAAI,CAAEC,KAAM,IAAML,UAAU,uBAC/B,4BACEC,QAASF,KAAKsB,aACdV,MAAOc,EAAS,CAAE+B,QAAS,OAAU,GACrCC,WAAUhC,GAETvD,EAAE,WAGP,uBAAKkC,GAAI,CAAEC,KAAM,IAAML,UAAU,qBAC/B,4BAAQC,QAASF,KAAKyC,YAAatE,EAAE,mBAK7C,kBAACwF,EAAA,EAAD,OAGF,yBAAK1D,UAAU,UACf,yBAAKA,UAAU,aACf,yBAAKA,UAAU,eAIlByC,GACC,kBAACkB,EAAA,QAAD,CAAoBjB,QAASA,EAAS7E,KAAMA,EAAM4B,IAAKA,IAGxDkD,GACC,kBAAC,EAAD,CACEjD,MAAO,WACL,EAAK8B,SAAS,CAAEmB,aAAa,Y,GA/JvB1B,e,UAwKLE,a,iCCxLf,8CAaeuC,IARf,WACE,OACE,yBAAKnD,GAAG,UACN,uBAAGP,UAAU,kBAAkB4D,IAAQ1F,EAAE,aAAa2F,OAAOC,IAAOjG,KAAMiG,IAAOC,a","file":"static/js/22.318125a9.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { withTranslation } from \"react-i18next\";\nimport \"./login.scss\";\nimport { Icon, message, Tooltip, Row, Col } from \"antd\";\nimport { observable } from \"mobx\";\nimport { wsget } from \"../../ws\";\nimport { trim, reg } from \"../../util/index\";\n\nconst key = \"forgetpwd\";\n\n@withTranslation()\n@observer\nclass Forgetpwd extends Component {\n  constructor(props) {\n    super(props);\n    this.textRef = React.createRef();\n    this.answerRef = React.createRef();\n    this.newpwdtRef = React.createRef();\n    this.confirmpwdRef = React.createRef();\n    this.t = this.props.t;\n  }\n\n  @observable idx = 0;\n  @observable name = \"\";\n  @observable question = \"\";\n  @observable answer = \"\";\n\n  componentDidMount() {\n    // this.textRef.current.focus();\n  }\n\n  next0 = () => {\n    const val = trim(this.textRef.current.value);\n    if (!val) {\n      message.error(this.t(\"enterNameMailbox\"));\n      return;\n    }\n    if (!reg.name.test(val)) {\n      message.error(this.t(\"isCorrect\"));\n      return;\n    }\n    message.loading({ content: this.t(\"Calibration\"), key, duration: 0 });\n    wsget(\"user_back_password\", val)\n      .then((data) => {\n        message.success({ content: this.t(\"enterAnswer\"), key, duration: 2 });\n        this.name = data.name;\n        this.question = data.pwd_question;\n        this.idx = 1;\n        this.answerRef.current.focus();\n      })\n      .catch(() => {\n        message.error(this.t(\"isCorrect\"));\n      });\n  };\n\n  next1 = () => {\n    const val = trim(this.answerRef.current.value);\n    if (!val) {\n      message.error(this.t(\"enterAnswer\"));\n      return;\n    }\n    message.loading({ content: this.t(\"Calibration\"), key, duration: 0 });\n    wsget(\"user_password_answer\", { name: this.name, answer: val })\n      .then((data) => {\n        message.success({ content: this.t(\"setnewPwd\"), key, duration: 2 });\n        this.answer = val;\n        this.idx = 2;\n      })\n      .catch((res) => {\n        if (res.state === 2) {\n          message.error(this.t(\"WrongAnswer\"));\n        }\n      });\n  };\n\n  confirm = () => {\n    const pwd1 = this.newpwdtRef.current.value;\n    const pwd2 = this.confirmpwdRef.current.value;\n    if (!reg.pwd.test(pwd1)) {\n      message.error(this.t(\"pwdFormat\"));\n      return;\n    }\n    if (!pwd1 && !pwd2) {\n      message.error(this.t(\"setnewPwd\"));\n      return;\n    }\n    if (pwd1 !== pwd2) {\n      message.error(this.t(\"twoPwds\"));\n      return;\n    }\n    const data = {\n      name: this.name,\n      answer: this.answer,\n      pwd: pwd2,\n    };\n    wsget(\"user_new_password\", data, 1).then((res) => {\n      this.props.close();\n    });\n  };\n\n  black1 = () => {\n    this.idx = 0;\n  };\n\n  black2 = () => {\n    this.idx = 1;\n  };\n\n  render() {\n    const { t } = this.props;\n    const { idx } = this;\n    const El = () => {\n      switch (idx) {\n        case 0:\n          return (\n            <div className=\"details\">\n              <Row gutter={[0, 16]}>\n                <Col xs={{ span: 24 }} className=\"forgetpwd_item\">\n                  <label className=\"forgetpwd_label\" htmlFor=\"name\">\n                    {t(\"nameMailbox\")} :\n                  </label>\n                </Col>\n                <Col xs={{ span: 24 }} className=\"forgetpwd_item\">\n                  <input\n                    id=\"name\"\n                    className=\"forgetpwd_input\"\n                    type=\"text\"\n                    autoFocus=\"autoFocus\"\n                    ref={this.textRef}\n                    placeholder={t(\"enterNameMailbox\")}\n                  />\n                </Col>\n                <Col xs={{ span: 24 }}>\n                  <span className=\"next\" onClick={this.next0}>\n                    {t(\"NextStep\")}\n                  </span>\n                </Col>\n                <Col xs={{ span: 0 }}>\n                  <span className=\"black\" style={{ visibility: \"hidden\" }}>\n                    {t(\"PreviousStep\")}\n                  </span>\n                </Col>\n              </Row>\n            </div>\n          );\n\n        case 1:\n          return (\n            <div className=\"details\">\n              <Row gutter={[0, 16]}>\n                <Col xs={{ span: 24 }} className=\"user-name\">\n                  <p className=\"title\">{t(\"UserName\")}</p>\n                  <p className=\"txt\">{this.name}</p>\n                </Col>\n                <Col xs={{ span: 24 }} className=\"user-question\">\n                  <p className=\"title\">{t(\"Problem\")}</p>\n                  <p className=\"txt\">{this.question}</p>\n                </Col>\n                <Col xs={{ span: 24 }} className=\"forgetpwd_item\">\n                  <label className=\"forgetpwd_label\" htmlFor=\"answer\">\n                    {t(\"Answer\")} :\n                  </label>\n                </Col>\n                <Col xs={{ span: 24 }} className=\"forgetpwd_item\">\n                  <input\n                    id=\"answer\"\n                    className=\"forgetpwd_input\"\n                    type=\"text\"\n                    autoFocus=\"autoFocus\"\n                    ref={this.answerRef}\n                    placeholder={t(\"enterAnswer\")}\n                  />\n                </Col>\n                <Col xs={{ span: 24 }}>\n                  <span className=\"next\" onClick={this.next1}>\n                    {t(\"NextStep\")}\n                  </span>\n                </Col>\n                <Col xs={{ span: 24 }}>\n                  <span className=\"black\" onClick={this.black1}>\n                    {t(\"PreviousStep\")}\n                  </span>\n                </Col>\n              </Row>\n            </div>\n          );\n\n        case 2:\n          return (\n            <div className=\"details\">\n              <Row gutter={[0, 16]}>\n                <Col xs={{ span: 24 }} className='forgetpwd_item'>\n                  <label className=\"forgetpwd_label\" htmlFor=\"new-pwd\">\n                    {t(\"NewPwd\")} :\n                </label>\n                </Col>\n                <Col xs={{ span: 24 }} className='forgetpwd_item'>\n                  <Tooltip\n                    placement=\"topLeft\"\n                    overlayClassName=\"tooltip\"\n                    trigger=\"focus\"\n                    title={t(\"pwdreg\")}\n                  >\n                    <input\n                      id=\"new-pwd\"\n                      className=\"forgetpwd_input\"\n                      type=\"password\"\n                      ref={this.newpwdtRef}\n                      placeholder={t(\"enterNewpwd\")}\n                    />\n                  </Tooltip>\n                </Col>\n                <Col xs={{ span: 24 }} className=\"forgetpwd_item\">\n                  <label className=\"forgetpwd_label\" htmlFor=\"confirm-pwd\">\n                    {t(\"ConfirmPwd\")} :\n                </label>\n                </Col>\n                <Col xs={{ span: 24 }} className=\"forgetpwd_item\">\n                  <input\n                    id=\"confirm-pwd\"\n                    className=\"forgetpwd_input\"\n                    type=\"password\"\n                    ref={this.confirmpwdRef}\n                    placeholder={t(\"enterPwdAgain\")}\n                  />\n                </Col>\n                <Col xs={{ span: 24 }}>\n                  <span className=\"next\" onClick={this.confirm}>\n                    {t(\"Determine\")}\n                  </span>\n                </Col>\n                <Col xs={{ span: 24 }}>\n                  <span className=\"black\" onClick={this.black2}>\n                    {t(\"PreviousStep\")}\n                  </span>\n                </Col>\n              </Row>\n            </div>\n          );\n\n        default:\n          break;\n      }\n    };\n\n    return (\n      <div className=\"forgetpwd-model\">\n        <div className=\"forgetpwd-inner\">\n          <div className=\"forgetpwd-content\">\n            <div className=\"forgetpwd-bd\">\n              <span className=\"close-icon\" onClick={this.props.close}>\n                <Icon type=\"close\" />\n              </span>\n              <div className=\"forgetpwd-head\">\n                <span>{t(\"ResetPwd\")}</span>\n              </div>\n              <El />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Forgetpwd;\n","import React, { Component } from \"react\";\nimport { message, Row, Col } from \"antd\";\nimport { withTranslation } from \"react-i18next\";\nimport { inject, observer } from \"mobx-react\";\nimport { storage, setCookie, reg, removeCookie } from \"../../util/index\";\nimport Footer from \"../../common/Widget/Footer\";\nimport \"./login.scss\";\nimport Perfectinformation from \"../../components/Perfectinformation\";\nimport Forgetpwd from \"./Forgetpwd\";\nimport Header from \"../../components/Header\";\nimport { buyUrl } from '../../util/url';\n\n// 1215456\n@withTranslation()\n@inject(\"login\", \"playlist\", \"rahmen\", \"photoalbum\")\n@observer\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.userRef = React.createRef();\n    this.pwdRef = React.createRef();\n    this.t = this.props.t;\n    this.state = {\n      disabl: false,\n      pro_visible: false,\n      user_id: null,\n      name: null,\n      pwd: null,\n      for_visible: false,\n    };\n  }\n\n  componentDidMount() {\n    storage.remove(\"user\");\n    removeCookie(\"lovtok\");\n    this.props.login.clearData();\n    this.props.photoalbum.clearData();\n    this.props.rahmen.clearData();\n    this.props.playlist.clearData();\n  }\n\n  handleSubmit = () => {\n    const key = \"login\";\n    let name = this.userRef.current.value.trim();\n    let pwd = this.pwdRef.current.value.trim();\n    if (name === \"\" || pwd === \"\") {\n      message.error(this.t(\"AccountPwdEmpty\"));\n      return;\n    }\n    if (!reg.pwd.test(pwd)) {\n      message.error({ content: this.t(\"LoginFailed\"), key, duration: 3 });\n      return;\n    }\n    message.loading({ content: this.t(\"loading\"), key, duration: 0 });\n    this.setState({ disabl: true });\n    const data = {\n      name,\n      pwd,\n    };\n\n    this.props.login.login_in(data, (res) => {\n      if (res) {\n        setCookie(\"lovtok\", res.token, 0);\n        this.setState({ disabl: false });\n        message.success({ content: this.t(\"LoginSucceed\"), key, duration: 2 });\n        if (this.props.location.state) {\n          const path = this.props.location.state.from;\n          this.props.history.push(path);\n        } else {\n          this.props.history.push(\"/\");\n        }\n      } else {\n        this.setState({ disabl: false });\n        message.error({ content: this.t(\"LoginFailed\"), key, duration: 3 });\n      }\n    });\n    \n  };\n\n  keyhandleSubmit = (event) => {\n    event.preventDefault();\n    if (event.keyCode === 13) {\n      this.handleSubmit();\n    }\n  };\n\n  nextinput = (event) => {\n    event.preventDefault();\n    if (event.keyCode === 13) {\n      this.pwdRef.current.focus();\n    }\n  };\n\n  goRegister = () => {\n    this.props.history.push(\"/register\");\n  };\n\n  render() {\n    const { t } = this.props;\n    const { disabl, pro_visible, user_id, name, pwd, for_visible } = this.state;\n\n    return (\n      <div className=\"container\">\n        <Header buyUrl={buyUrl} title={t('Signsmartframe')} />\n        <div className='login-mod'>\n          <div className='login-container'>\n            <div className='login-box'>\n              <div className='login-inner'>\n                <div className='login-inner-head'>\n                  <h2>{t('login')}</h2>\n                </div>\n                <div className=\"login-content\">\n                  <Row gutter={[0, 16]}>\n                    <Col xs={{ span: 24 }} className=\"login-item-name\">\n                      <input\n                        spellCheck={false}\n                        type=\"text\"\n                        maxLength={24}\n                        placeholder={t(\"nameMailbox\")}\n                        ref={this.userRef}\n                        onKeyUp={this.nextinput}\n                      />\n                    </Col>\n                    <Col xs={{ span: 24 }} className=\"login-item-pwd\">\n                      <input\n                        type=\"password\"\n                        placeholder={t(\"Password\")}\n                        maxLength={32}\n                        ref={this.pwdRef}\n                        onKeyUp={this.keyhandleSubmit}\n                      />\n                    </Col>\n                    <Col xs={{ span: 24 }}>\n                      <p className=\"login-forgetpwd\">\n                        <span\n                          className=\"forget-password\"\n                          onClick={() => {\n                            this.setState({ for_visible: true });\n                          }}\n                        >\n                          {t(\"ForgetPwd\")}\n                        </span>\n                      </p>\n                    </Col>\n                    <Col xs={{ span: 24 }} className=\"login-item-loginbtn\">\n                      <button\n                        onClick={this.handleSubmit}\n                        style={disabl ? { opacity: \"0.5\" } : {}}\n                        disabled={disabl ? true : false}\n                      >\n                        {t(\"login\")}\n                      </button>\n                    </Col>\n                    <Col xs={{ span: 24 }} className=\"login-item-regbtn\">\n                      <button onClick={this.goRegister}>{t(\"Registered\")}</button>\n                    </Col>\n                  </Row>\n                </div>\n              </div>\n              <Footer />\n            </div>\n\n            <div className=\"l-top\"></div>\n            <div className=\"l-middle\"></div>\n            <div className=\"l-bottom\"></div>\n          </div>\n        </div>\n\n        {pro_visible && (\n          <Perfectinformation user_id={user_id} name={name} pwd={pwd} />\n        )}\n\n        {for_visible && (\n          <Forgetpwd\n            close={() => {\n              this.setState({ for_visible: false });\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from 'react';\nimport i18next from 'i18next';\nimport './style.scss';\nimport config from '../../config'\n\nfunction Footer() {\n  return (\n    <div id=\"Footer\">\n      <p className='foot-copyright'>{i18next.t('copyright').format(config.name, config.version)}</p>\n    </div>\n  );\n}\n\nexport default Footer;\n"],"sourceRoot":""}